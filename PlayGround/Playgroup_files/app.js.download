(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(e,t,n){e.exports=n(41)},function(e,t,n){"use strict";n.d(t,"m",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"k",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"l",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"o",(function(){return m})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return p})),n.d(t,"n",(function(){return f})),n.d(t,"h",(function(){return v})),n.d(t,"g",(function(){return g}));var r="top",a="bottom",o="right",i="left",s="auto",c=[r,a,o,i],l="start",u="end",d="clippingParents",m="viewport",h="popper",p="reference",f=c.reduce((function(e,t){return e.concat([t+"-"+l,t+"-"+u])}),[]),v=[].concat(c,[s]).reduce((function(e,t){return e.concat([t,t+"-"+l,t+"-"+u])}),[]),g=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"]},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n(3);function a(e){return e instanceof Object(r.a)(e).Element||e instanceof Element}function o(e){return e instanceof Object(r.a)(e).HTMLElement||e instanceof HTMLElement}},function(e,t,n){"use strict";function r(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t?t.defaultView:window}return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){return e.split("-")[0]}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){return e?(e.nodeName||"").toLowerCase():null}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2);function a(e){return(Object(r.a)(e)?e.ownerDocument:e.document).documentElement}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3);function a(e){return Object(r.a)(e).getComputedStyle(e)}},function(e,t,n){"use strict";function r(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}n.d(t,"a",(function(){return r}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3);function a(e){var t=Object(r.a)(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}},function(e,t,n){"use strict";function r(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(3),a=n(5),o=n(7),i=n(2);function s(e){return["table","td","th"].indexOf(Object(a.a)(e))>=0}function c(e){var t;return!Object(i.b)(e)||!(t=e.offsetParent)||void 0!==window.InstallTrigger&&"fixed"===Object(o.a)(t).position?null:t}function l(e){for(var t=Object(r.a)(e),n=c(e);n&&s(n);)n=c(n);return n&&"body"===Object(a.a)(n)&&"static"===Object(o.a)(n).position?t:n||t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5);function a(e){return"html"===Object(r.a)(e)?e:e.parentNode||e.host||document.ownerDocument||document.documentElement}var o=n(7),i=n(2);var s=n(3);function c(e,t){void 0===t&&(t=[]);var n=function e(t){if(["html","body","#document"].indexOf(Object(r.a)(t))>=0)return t.ownerDocument.body;if(Object(i.b)(t)){var n=Object(o.a)(t),s=n.overflow,c=n.overflowX,l=n.overflowY;if(/auto|scroll|overlay|hidden/.test(s+l+c))return t}return e(a(t))}(e),l="body"===Object(r.a)(n),u=l?Object(s.a)(n):n,d=t.concat(u);return l?d:d.concat(c(a(u)))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(8),a=n(6),o=n(10);function i(e){return Object(r.a)(Object(a.a)(e)).left+Object(o.a)(e).scrollLeft}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),a=n(10),o=n(3),i=n(2);var s=n(5),c=n(14),l=n(6);function u(e,t,n){var u;void 0===n&&(n=!1);var d,m,h=Object(r.a)(e),p={scrollLeft:0,scrollTop:0},f={x:0,y:0};return n||("body"!==Object(s.a)(t)&&(p=(d=t)!==Object(o.a)(d)&&Object(i.b)(d)?{scrollLeft:(m=d).scrollLeft,scrollTop:m.scrollTop}:Object(a.a)(d)),Object(i.b)(t)?((f=Object(r.a)(t)).x+=t.clientLeft,f.y+=t.clientTop):(u=Object(l.a)(t))&&(f.x=Object(c.a)(u))),{x:h.left+p.scrollLeft-f.x,y:h.top+p.scrollTop-f.y,width:h.width,height:h.height}}},function(e,t,n){"use strict";n.d(t,"popperGenerator",(function(){return h}));var r=n(15),a=n(11),o=n(13),i=n(12),s=n(17),c=n(19),l=n(18),u=n(2),d={placement:"bottom",modifiers:[],strategy:"absolute"};function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function h(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,h=void 0===n?[]:n,p=t.defaultOptions,f=void 0===p?d:p;return function(e,t,n){void 0===n&&(n=f);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},d,{},f),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},v=[],g=!1,y={state:p,setOptions:function(n){w(),p.options=Object.assign({},f,{},p.options,{},n),p.scrollParents={reference:Object(u.a)(e)?Object(o.a)(e):[],popper:Object(o.a)(t)};var r=Object(s.a)(Object(l.a)([].concat(h,p.options.modifiers)));return p.orderedModifiers=r.filter((function(e){return e.enabled})),p.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,a=e.effect;if("function"==typeof a){var o=a({state:p,name:t,instance:y,options:r});v.push(o||function(){})}})),y.update()},forceUpdate:function(){if(!g){var e=p.elements,t=e.reference,n=e.popper;if(m(t,n)){p.rects={reference:Object(r.a)(t,Object(i.a)(n),"fixed"===p.options.strategy),popper:Object(a.a)(n)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach((function(e){return p.modifiersData[e.name]=Object.assign({},e.data)}));for(var o=0;o<p.orderedModifiers.length;o++)if(!0!==p.reset){var s=p.orderedModifiers[o],c=s.fn,l=s.options,u=void 0===l?{}:l,d=s.name;"function"==typeof c&&(p=c({state:p,options:u,name:d,instance:y})||p)}else p.reset=!1,o=-1}}},update:Object(c.a)((function(){return new Promise((function(e){y.forceUpdate(),e(p)}))})),destroy:function(){w(),g=!0}};if(!m(e,t))return y;function w(){v.forEach((function(e){return e()})),v=[]}return y.setOptions(n).then((function(e){!g&&n.onFirstUpdate&&n.onFirstUpdate(e)})),y}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1);function a(e){var t=new Map,n=new Set,r=[];return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||function e(a){n.add(a.name),[].concat(a.requires||[],a.requiresIfExists||[]).forEach((function(r){if(!n.has(r)){var a=t.get(r);a&&e(a)}})),r.push(a)}(e)})),r}function o(e){var t=a(e);return r.g.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}},function(e,t,n){"use strict";function r(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,{},t,{options:Object.assign({},n.options,{},t.options),data:Object.assign({},n.data,{},t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}n.d(t,"a",(function(){return r}))},,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return Z}));var r=n(16),a=n(3),o={passive:!0};var i={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=void 0===i||i,c=r.resize,l=void 0===c||c,u=Object(a.a)(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&d.forEach((function(e){e.addEventListener("scroll",n.update,o)})),l&&u.addEventListener("resize",n.update,o),function(){s&&d.forEach((function(e){e.removeEventListener("scroll",n.update,o)})),l&&u.removeEventListener("resize",n.update,o)}},data:{}},s=n(4);function c(e){return e.split("-")[1]}function l(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}var u=n(1);function d(e){var t,n=e.reference,r=e.element,a=e.placement,o=a?Object(s.a)(a):null,i=a?c(a):null,d=n.x+n.width/2-r.width/2,m=n.y+n.height/2-r.height/2;switch(o){case u.m:t={x:d,y:n.y-r.height};break;case u.c:t={x:d,y:n.y+n.height};break;case u.k:t={x:n.x+n.width,y:m};break;case u.f:t={x:n.x-r.width,y:m};break;default:t={x:n.x,y:n.y}}var h=o?l(o):null;if(null!=h){var p="y"===h?"height":"width";switch(i){case u.l:t[h]=Math.floor(t[h])-Math.floor(n[p]/2-r[p]/2);break;case u.e:t[h]=Math.floor(t[h])+Math.ceil(n[p]/2-r[p]/2)}}return t}var m={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=d({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},h=n(12),p=n(6),f={top:"auto",right:"auto",bottom:"auto",left:"auto"};function v(e){var t,n=e.popper,r=e.popperRect,o=e.placement,i=e.offsets,s=e.position,c=e.gpuAcceleration,l=e.adaptive,d=function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:Math.round(t*r)/r||0,y:Math.round(n*r)/r||0}}(i),m=d.x,v=d.y,g=i.hasOwnProperty("x"),y=i.hasOwnProperty("y"),w=u.f,b=u.m,S=window;if(l){var x=Object(h.a)(n);x===Object(a.a)(n)&&(x=Object(p.a)(n)),o===u.m&&(b=u.c,v-=x.clientHeight-r.height,v*=c?1:-1),o===u.f&&(w=u.k,m-=x.clientWidth-r.width,m*=c?1:-1)}var k,q=Object.assign({position:s},l&&f);return c?Object.assign({},q,((k={})[b]=y?"0":"",k[w]=g?"0":"",k.transform=(S.devicePixelRatio||1)<2?"translate("+m+"px, "+v+"px)":"translate3d("+m+"px, "+v+"px, 0)",k)):Object.assign({},q,((t={})[b]=y?v+"px":"",t[w]=g?m+"px":"",t.transform="",t))}var g={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,a=void 0===r||r,o=n.adaptive,i=void 0===o||o,c={placement:Object(s.a)(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a};t.styles.popper=Object.assign({},t.styles.popper,{},v(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i}))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,{},v(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},y=n(5),w=n(2);var b={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},a=t.elements[e];Object(w.b)(a)&&Object(y.a)(a)&&(Object.assign(a.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?a.removeAttribute(e):a.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:"absolute",left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],a=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});Object(w.b)(r)&&Object(y.a)(r)&&(Object.assign(r.style,o),Object.keys(a).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};var S={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.offset,o=void 0===a?[0,0]:a,i=u.h.reduce((function(e,n){return e[n]=function(e,t,n){var r=Object(s.a)(e),a=[u.f,u.m].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},t,{placement:e})):n,i=o[0],c=o[1];return i=i||0,c=(c||0)*a,[u.f,u.k].indexOf(r)>=0?{x:c,y:i}:{x:i,y:c}}(n,t.rects,o),e}),{}),c=i[t.placement],l=c.x,d=c.y;t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=d,t.modifiersData[r]=i}},x={left:"right",right:"left",bottom:"top",top:"bottom"};function k(e){return e.replace(/left|right|bottom|top/g,(function(e){return x[e]}))}var q={start:"end",end:"start"};function T(e){return e.replace(/start|end/g,(function(e){return q[e]}))}var L=n(8);var D=n(15),M=n(10);var O=n(13),A=n(7);function I(e){return parseFloat(e)||0}var E=n(14);function j(e){var t=Object(a.a)(e),n=function(e){var t=Object(w.b)(e)?Object(A.a)(e):{};return{top:I(t.borderTopWidth),right:I(t.borderRightWidth),bottom:I(t.borderBottomWidth),left:I(t.borderLeftWidth)}}(e),r="html"===Object(y.a)(e),o=Object(E.a)(e),i=e.clientWidth+n.right,s=e.clientHeight+n.bottom;return r&&t.innerHeight-e.clientHeight>50&&(s=t.innerHeight-n.bottom),{top:r?0:e.clientTop,right:e.clientLeft>n.left?n.right:r?t.innerWidth-i-o:e.offsetWidth-i,bottom:r?t.innerHeight-s:e.offsetHeight-s,left:r?o:e.clientLeft}}function C(e,t){var n=Boolean(t.getRootNode&&t.getRootNode().host);if(e.contains(t))return!0;if(n){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function _(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function N(e,t){return t===u.o?_(function(e){var t=Object(a.a)(e);return{width:t.innerWidth,height:t.innerHeight,x:0,y:0}}(e)):Object(w.b)(t)?Object(L.a)(t):_(function(e){var t=Object(a.a)(e),n=Object(M.a)(e),r=Object(D.a)(Object(p.a)(e),t);return r.height=Math.max(r.height,t.innerHeight),r.width=Math.max(r.width,t.innerWidth),r.x=-n.scrollLeft,r.y=-n.scrollTop,r}(Object(p.a)(e)))}function H(e,t,n){var r="clippingParents"===t?function(e){var t=Object(O.a)(e),n=["absolute","fixed"].indexOf(Object(A.a)(e).position)>=0&&Object(w.b)(e)?Object(h.a)(e):e;return Object(w.a)(n)?t.filter((function(e){return Object(w.a)(e)&&C(e,n)})):[]}(e):[].concat(t),a=[].concat(r,[n]),o=a[0],i=a.reduce((function(t,n){var r=N(e,n),a=j(Object(w.b)(n)?n:Object(p.a)(e));return t.top=Math.max(r.top+a.top,t.top),t.right=Math.min(r.right-a.right,t.right),t.bottom=Math.min(r.bottom-a.bottom,t.bottom),t.left=Math.max(r.left+a.left,t.left),t}),N(e,o));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function P(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},{},e)}function R(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function B(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=void 0===r?e.placement:r,o=n.boundary,i=void 0===o?u.d:o,s=n.rootBoundary,c=void 0===s?u.o:s,l=n.elementContext,m=void 0===l?u.i:l,h=n.altBoundary,f=void 0!==h&&h,v=n.padding,g=void 0===v?0:v,y=P("number"!=typeof g?g:R(g,u.b)),b=m===u.i?u.j:u.i,S=e.elements.reference,x=e.rects.popper,k=e.elements[f?b:m],q=H(Object(w.a)(k)?k:Object(p.a)(e.elements.popper),i,c),T=Object(L.a)(S),D=d({reference:T,element:x,strategy:"absolute",placement:a}),M=_(Object.assign({},x,{},D)),O=m===u.i?M:T,A={top:q.top-O.top+y.top,bottom:O.bottom-q.bottom+y.bottom,left:q.left-O.left+y.left,right:O.right-q.right+y.right},I=e.modifiersData.offset;if(m===u.i&&I){var E=I[a];Object.keys(A).forEach((function(e){var t=[u.k,u.c].indexOf(e)>=0?1:-1,n=[u.m,u.c].indexOf(e)>=0?"y":"x";A[e]+=E[n]*t}))}return A}var U={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var a=n.fallbackPlacements,o=n.padding,i=n.boundary,l=n.rootBoundary,d=n.altBoundary,m=n.flipVariations,h=void 0===m||m,p=t.options.placement,f=Object(s.a)(p),v=a||(f===p||!h?[k(p)]:function(e){if(Object(s.a)(e)===u.a)return[];var t=k(e);return[T(e),t,T(t)]}(p)),g=[p].concat(v).reduce((function(e,n){return e.concat(Object(s.a)(n)===u.a?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=n.boundary,o=n.rootBoundary,i=n.padding,l=n.flipVariations,d=c(r),m=(d?l?u.n:u.n.filter((function(e){return c(e)===d})):u.b).reduce((function(t,n){return t[n]=B(e,{placement:n,boundary:a,rootBoundary:o,padding:i})[Object(s.a)(n)],t}),{});return Object.keys(m).sort((function(e,t){return m[e]-m[t]}))}(t,{placement:n,boundary:i,rootBoundary:l,padding:o,flipVariations:h}):n)}),[]),y=t.rects.reference,w=t.rects.popper,b=new Map,S=!0,x=g[0],q=0;q<g.length;q++){var L=g[q],D=Object(s.a)(L),M=c(L)===u.l,O=[u.m,u.c].indexOf(D)>=0,A=O?"width":"height",I=B(t,{placement:L,boundary:i,rootBoundary:l,altBoundary:d,padding:o}),E=O?M?u.k:u.f:M?u.c:u.m;y[A]>w[A]&&(E=k(E));var j=k(E),C=[I[D]<=0,I[E]<=0,I[j]<=0];if(C.every((function(e){return e}))){x=L,S=!1;break}b.set(L,C)}if(S)for(var _=function(e){var t=g.find((function(t){var n=b.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return x=t,"break"},N=h?3:1;N>0;N--){if("break"===_(N))break}t.placement!==x&&(t.modifiersData[r]._skip=!0,t.placement=x,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function F(e,t,n){return Math.max(e,Math.min(t,n))}var V=n(11);function J(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function W(e){return[u.m,u.k,u.c,u.f].some((function(t){return e[t]>=0}))}var z=[i,m,g,b,S,U,{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.mainAxis,o=void 0===a||a,i=n.altAxis,d=void 0!==i&&i,m=n.boundary,h=n.rootBoundary,p=n.altBoundary,f=n.padding,v=n.tether,g=void 0===v||v,y=n.tetherOffset,w=void 0===y?0:y,b=B(t,{boundary:m,rootBoundary:h,padding:f,altBoundary:p}),S=Object(s.a)(t.placement),x=c(t.placement),k=!x,q=l(S),T="x"===q?"y":"x",L=t.modifiersData.popperOffsets,D=t.rects.reference,M=t.rects.popper,O="function"==typeof w?w(Object.assign({},t.rects,{placement:t.placement})):w,A={x:0,y:0};if(o){var I="y"===q?u.m:u.f,E="y"===q?u.c:u.k,j="y"===q?"height":"width",C=L[q],_=L[q]+b[I],N=L[q]-b[E],H=g?-M[j]/2:0,P=x===u.l?D[j]:M[j],R=x===u.l?-M[j]:-D[j],U=t.elements.arrow,J=g&&U?Object(V.a)(U):{width:0,height:0},W=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},z=W[I],Z=W[E],X=F(0,D[j],J[j]),G=k?D[j]/2-H-X-z-O:P-X-z-O,Y=k?-D[j]/2+H+X+Z+O:R+X+Z+O,$=U?"y"===q?t.elements.popper.clientTop:t.elements.popper.clientLeft:0,K=t.modifiersData.offset?t.modifiersData.offset[t.placement][q]:0,Q=L[q]+G-K-$,ee=L[q]+Y-K,te=F(g?Math.min(_,Q):_,C,g?Math.max(N,ee):N);L[q]=te,A[q]=te-C}if(d){var ne="x"===q?u.m:u.f,re="x"===q?u.c:u.k,ae=L[T],oe=F(ae+b[ne],ae,ae-b[re]);t.modifiersData.popperOffsets[T]=oe,A[T]=oe-ae}t.modifiersData[r]=A},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,a=n.elements.arrow,o=n.modifiersData.popperOffsets,i=Object(s.a)(n.placement),c=l(i),d=[u.f,u.k].indexOf(i)>=0?"height":"width";if(a){var m=n.modifiersData[r+"#persistent"].padding,h=Object(V.a)(a),p="y"===c?u.m:u.f,f="y"===c?u.c:u.k,v=(n.rects.reference[d]+n.rects.reference[c]-o[c]-n.rects.popper[d])/2-(o[c]-n.rects.reference[c])/2-("y"===c?n.elements.popper.clientLeft:n.elements.popper.clientTop),g=F(m[p],n.rects.popper[d]/2-h[d]/2+v,n.rects.popper[d]-h[d]-m[f]),y=c;n.modifiersData[r]=((t={})[y]=g,t)}},effect:function(e){var t=e.state,n=e.options,r=e.name,a=n.element,o=void 0===a?"[data-popper-arrow]":a,i=n.padding,s=void 0===i?0:i;("string"!=typeof o||(o=t.elements.popper.querySelector(o)))&&C(t.elements.popper,o)&&(t.elements.arrow=o,t.modifiersData[r+"#persistent"]={padding:P("number"!=typeof s?s:R(s,u.b))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,a=t.rects.popper,o=t.modifiersData.preventOverflow,i=B(t,{elementContext:"reference"}),s=B(t,{altBoundary:!0}),c=J(i,r),l=J(s,a,o),u=W(c),d=W(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}],Z=Object(r.popperGenerator)({defaultModifiers:z})},,,,,,function(e,t){var n,r,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var c,l=[],u=!1,d=-1;function m(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&h())}function h(){if(!u){var e=s(m);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||u||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=f,a.addListener=f,a.once=f,a.off=f,a.removeListener=f,a.removeAllListeners=f,a.emit=f,a.prependListener=f,a.prependOnceListener=f,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},,,,,,,,,,function(e,t,n){n(39),e.exports=n(87)},function(e,t,n){n(40),n(42),n(43),n(44),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),window.axios=n(23),window.Popper=n(33).default,window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",window.Tagify=n(83),window.EmojiButton=n(34),window.tippy=n(35).default},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Channels=function(){function e(){return(e=i(a.a.mark((function e(t,n,r,o){var s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=document.querySelector("#userid").value,Array.from(document.querySelectorAll(".main-link")).forEach((function(e){e.classList.remove("active")})),Array.from(document.querySelectorAll(".single-channel")).forEach((function(e){e.classList.remove("active")})),document.querySelector(".single-thread-additional").classList.add("d-none"),document.querySelector("body").classList.remove("showing-single-thread"),document.querySelector('[data-channel="'+t+'"]')&&(Array.from(document.querySelectorAll('[data-channel="'+t+'"]')).forEach((function(e){e.classList.add("active")})),document.querySelector(".mobile-channels h2").textContent=document.querySelector('[data-channel="'+t+'"]').textContent),document.querySelector(".single-thread-rendered").innerHTML="",c=0,null==n?(c=document.querySelectorAll("#thread-list .thread").length)||(c=0):c=n,e.next=12,axios.post("/api/channel/change",{channelID:t,userID:s,offset:c,limit:10});case 12:l=e.sent,Renderer.render("threads",l.data,null,!o),r||State.updateURL("channel",l.data[0].slug),r&&!o||setTimeout(i(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/channel/leaders",{channelID:t});case 2:n=e.sent,LazyRender.renderLeaderboard(n.data);case 4:case"end":return e.stop()}}),e)}))),10);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.querySelector(".load-more").classList.add("active"),n=document.querySelector("#userid").value,r=document.querySelectorAll("#thread-list .thread").length,e.next=5,axios.post("/api/channel/change",{channelID:t,userID:n,offset:r,limit:10});case 5:o=e.sent,Renderer.loadMore("threads",o.data),State.updateURL("channel",o.data[0].slug);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=i(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#teamid").value,n=document.querySelector("#userid").value,document.querySelector("#usertoken").value,e.next=5,axios.post("/api/channel/create",{userID:n,teamID:t,title:document.querySelector("#new-channel-title").value,desc:document.querySelector("#new-channel-desc").value,privacy:document.querySelector("#new-channel-privacy").value});case 5:(r=e.sent)&&200==r.status&&(Channels.renderChannelsInSidebar(r.data.id),Overlay.close(),Notification.showToast("Channel created successfully."));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=i(a.a.mark((function e(t){var n,r,o,i,s,c,l,u,d,m,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.querySelector("#userid").value,e.next=3,axios.post("/api/channel/getsingle",{channelID:t,userID:n});case 3:if(!(r=e.sent)||200!=r.status){e.next=35;break}return o=r.data,document.querySelector(".channel-settings-dialog").setAttribute("data-active-channel",o.id),document.querySelector("#editing-channel-title").value=o.channel_name,document.querySelector("#editing-channel-desc").value=o.description,document.querySelector("#editing-channel-privacy").value=o.public,document.querySelector("#editing-channel-privacy").dispatchEvent(new Event("change")),document.querySelector(".channel-settings-dialog .channel-image").style.backgroundImage="url(".concat(o.channel_image,")"),i=document.querySelector("#teamid").value,s=document.querySelector("#userid").value,e.next=16,axios.post("/api/members/get",{userID:s,teamID:i});case 16:if(c=e.sent,l=[],c.data.forEach((function(e,t){l.push(e.name)})),null!=window.tagify&&(window.tagify.removeAllTags(),window.tagify.destroy(),window.tagify=void 0),u=document.querySelector("#new-members-list"),window.tagify=new Tagify(u,{whitelist:l,enforceWhitelist:!0,dropdown:{classname:"color-blue",enabled:1,maxItems:5}}),document.querySelector(".channel-settings-dialog .channel-member-list").innerHTML="",0!=o.public){e.next=34;break}return e.next=26,axios.post("/api/channel/access",{userID:s,teamID:i,channelID:o.id});case 26:d=e.sent,m=d.data,h="",m.forEach((function(e,t){var n=c.data.filter((function(t){return t.id==e.user_id}));h+='<li data-user-id="'.concat(n[0].id,'"><a href="#">\n                            <div class="commentator round-btn" style="background-image: url(').concat(n[0].avatar,')"></div><span>').concat(n[0].name,'</span>\n                            <div class="btn btn-empty remove-from-channel">remove</div>\n                          </a></li>')})),document.querySelector(".channel-settings-dialog .channel-member-list").innerHTML=h,document.querySelector(".channel-settings-dialog .add-remove-members-section").classList.remove("d-none"),e.next=35;break;case 34:document.querySelector(".channel-settings-dialog .add-remove-members-section").classList.add("d-none");case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=i(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector(".channel-settings-dialog").getAttribute("data-active-channel"),n=document.querySelector("#teamid").value,(r=new FormData).append("channelImage",document.querySelector("#channelImage").files[0]),r.append("channelID",t),r.append("teamID",n),r.append("name",document.querySelector("#editing-channel-title").value),r.append("description",document.querySelector("#editing-channel-desc").value),r.append("public",document.querySelector("#editing-channel-privacy").value),e.next=11,axios({method:"post",url:"/api/channel/update",data:r,headers:{"Content-Type":"multipart/form-data"}});case 11:(o=e.sent)&&200==o.status&&(Channels.renderChannelsInSidebar(t,0),Channels.changeChannel(t,null,!0,!0),Overlay.close(),Notification.showToast("Channel details updated successfully."));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=i(a.a.mark((function e(){var t,n,r,o,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.querySelector("#teamid").value,n=document.querySelector("#userid").value,r=document.querySelector(".channel-settings-dialog").getAttribute("data-active-channel"),o=JSON.parse(localStorage.members),i=[],s=[],!localStorage.members){e.next=10;break}o=JSON.parse(localStorage.members),e.next=14;break;case 10:return e.next=12,axios.post("/api/members/get",{userID:n,teamID:t});case 12:o=(o=e.sent).data;case 14:return Array.from(document.querySelectorAll(".channel-settings-dialog .tagify__tag-text")).forEach((function(e){var t=o.filter((function(t){return t.name==e.textContent}));i.push(t[0].id),s.push(t)})),e.next=17,axios.post("/api/channel/addmembers",{userID:n,teamID:t,channelID:r,newMembers:i.toString()});case 17:(c=e.sent)&&200==c.status&&(s.forEach((function(e,t){var n='<li data-user-id="'.concat(e[0].id,'"><a href="#">\n                          <div class="commentator round-btn" style="background-image: url(').concat(e[0].avatar,')"></div><span>').concat(e[0].name,'</span>\n                          <div class="btn btn-empty remove-from-channel">remove</div>\n                        </a></li>');document.querySelector(".channel-member-list").innerHTML=document.querySelector(".channel-member-list").innerHTML+n})),document.querySelector(".new-members-list").innerHTML="",Overlay.close(),Notification.showToast("Members added to channel successfully."));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=i(a.a.mark((function e(t,n){var r,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=document.querySelector("#teamid").value,o=document.querySelector("#userid").value,e.next=4,axios.post("/api/channel/get",{userID:o,teamID:r});case 4:i=e.sent,s="",i&&i.data.forEach((function(e,t){s+='<li><a class="single-channel" data-slug="'.concat(e.slug,'" data-channel="').concat(e.id,'"># ').concat(e.channel_name,"</a></li>")})),document.querySelector("#topics-list").innerHTML=s,Channels.changeChannel(t,n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=i(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector(".channel-settings-dialog").getAttribute("data-active-channel"),e.next=3,axios.post("/api/channel/delete",{channelID:t});case 3:(n=e.sent)&&200==n.status&&(Channels.renderChannelsInSidebar(t),Overlay.close(),Notification.showToast("Channel deleted successfully."));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=i(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.querySelector("#teamid").value,r=document.querySelector("#userid").value,o=document.querySelector(".channel-settings-dialog").getAttribute("data-active-channel"),e.next=5,axios.post("/api/channel/removemember",{userID:r,teamID:n,channelID:o,memberID:t});case 5:(i=e.sent)&&200==i.status&&(document.querySelector(".channel-settings-dialog li[data-user-id='"+t+"']").parentNode.removeChild(document.querySelector(".channel-settings-dialog li[data-user-id='"+t+"']")),Notification.showToast("User removed from channel successfully."));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=i(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/channel/markchannelread",{channelID:t});case 2:e.sent,document.querySelector('[data-channel="'+t+'"]').classList.remove("unread"),document.querySelector(".channel-context-menu").classList.remove("show");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{renderChannelsInSidebar:function(e,t){return c.apply(this,arguments)},changeChannel:function(t,n,r,a){return e.apply(this,arguments)},editChannel:function(e){return r.apply(this,arguments)},create:function(){return n.apply(this,arguments)},update:function(){return o.apply(this,arguments)},remove:function(){return l.apply(this,arguments)},addMember:function(){return s.apply(this,arguments)},removeMember:function(e){return u.apply(this,arguments)},loadMore:function(e){return t.apply(this,arguments)},markChannelRead:function(e){return d.apply(this,arguments)}}}()},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(e,t,n,r){var a=t&&t.prototype instanceof u?t:u,o=Object.create(a.prototype),i=new x(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return q()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=w(i,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function u(){}function d(){}function m(){}var h={};h[a]=function(){return this};var p=Object.getPrototypeOf,f=p&&p(p(k([])));f&&f!==t&&n.call(f,a)&&(h=f);var v=m.prototype=u.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function y(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,s){var l=c(e[a],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,s)}))}s(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:q}}function q(){return{value:void 0,done:!0}}return d.prototype=v.constructor=m,m.constructor=d,m[i]=d.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,i in e||(e[i]="GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(y.prototype),y.prototype[o]=function(){return this},e.AsyncIterator=y,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new y(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(v),v[i]="Generator",v[a]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loader=t}var t,n,r;return t=e,(n=[{key:"upload",value:function(){var e=document.querySelector("#teamid").value;return this.loader.file.then((function(t){return new Promise((function(n,r){var a=new FormData;a.append("image",t),axios.post("/api/file/".concat(e,"/upload"),a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){n({default:e.data})}))}))}))}},{key:"abort",value:function(){Notification.showToast("Upload failed. Please try again.")}}])&&s(t.prototype,n),r&&s(t,r),e}();window.editor="",window.Threads=function(){function e(){return(e=i(a.a.mark((function e(t,n,r,o){var i,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=document.querySelector("#teamid").value,s=document.querySelector("#userid").value,Array.from(document.querySelectorAll("#thread-list .thread")).forEach((function(e){e.classList.remove("active")})),document.querySelector("body").classList.add("showing-single-thread"),document.querySelector(".single-thread-rendered").innerHTML="",document.querySelector(".single-thread-additional").classList.add("d-none"),isNaN(t)||document.querySelector('#thread-list [thread-id="'+t+'"]')&&document.querySelector('#thread-list [thread-id="'+t+'"]').classList.add("active"),document.querySelector("body > .ct")&&document.querySelector("body > .ct").parentNode.removeChild(document.querySelector("body > .ct")),e.next=11,axios.post("/api/user/get",{userID:s,teamID:i});case 11:if(l=e.sent,!isNaN(t)){e.next=18;break}return e.next=15,axios.post("/api/thread/changeBySlug",{slug:t,userID:s});case 15:c=e.sent,e.next=21;break;case 18:return e.next=20,axios.post("/api/thread/change",{threadID:t,userID:s});case 20:c=e.sent;case 21:Renderer.render("thread",c.data,l.data,!0).then((function(){if(isNaN(t)&&document.querySelector('#thread-list [thread-slug="'+t+'"]')&&document.querySelector('#thread-list [thread-slug="'+t+'"]').classList.add("active"),n&&document.querySelector(".thread-list .thread.active")){var e=document.querySelector(".thread-list .thread.active").offsetTop-162;document.querySelector(".thread-list").scrollTop=e}Comments.loadComments(c.data.thread_id,r),Threads.markRead(c.data.channel_id,c.data.thread_id,s)})),o||State.updateURL("thread",c.data.slug+"/"+c.data.thread_slug),LocalStore.updateViewedThreads(c.data.thread_id);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(e,t){return n.apply(this,arguments)}function n(){return(n=i(a.a.mark((function e(t,n){var r,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=document.querySelector("#userid").value,Array.from(document.querySelectorAll(".main-link")).forEach((function(e){e.classList.remove("active")})),Array.from(document.querySelectorAll(".main-section")).forEach((function(e){e.classList.add("d-none")})),document.querySelector("body").classList.remove("no-threads"),document.querySelector("body").classList.add("showing-single-thread"),document.querySelector(".single-thread-rendered").innerHTML="",document.querySelector(".channel-view").classList.remove("d-none"),document.querySelector("#thread-list").innerHTML="",document.querySelector('[data-channel="'+t+'"]').classList.add("active"),document.querySelector(".single-thread-additional").classList.add("d-none"),document.querySelector("body > .ct")&&document.querySelector("body > .ct").parentNode.removeChild(document.querySelector("body > .ct")),(o=document.querySelectorAll("#thread-list .thread").length)||(o=0),e.next=15,axios.post("/api/channel/change",{channelID:t,userID:r,offset:o,limit:10});case 15:return i=e.sent,e.next=18,axios.post("/api/thread/change",{threadID:n});case 18:s=e.sent,Renderer.render("threads",i.data,null,!0).then((function(){State.updateURL("thread",s.data.slug+"/"+s.data.thread_slug),Renderer.render("thread",s.data,null,!0).then((function(){Comments.loadComments(s.data.thread_id),document.querySelector('#thread-list [thread-id="'+n+'"]')?document.querySelector('#thread-list [thread-id="'+n+'"]').classList.add("active"):document.querySelector('#thread-list [thread-slug="'+n+'"]').classList.add("active")}))})),LocalStore.updateViewedThreads(s.data.thread_id);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=i(a.a.mark((function e(t,n){var r,o,i,s,l,u,d,m,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=document.querySelector("#teamid").value,o=document.querySelector("#userid").value,document.querySelector("#new-post-title").value="",document.querySelector("#new-post-title").value="",t?(document.querySelector("#channel-select").classList.add("d-none"),document.querySelector("#create-thread").textContent="Update thread"):(document.querySelector("#channel-select").classList.remove("d-none"),document.querySelector("#create-thread").textContent="Post"),n&&(document.querySelector("#new-post-title").value=n),i=[],s=[],l=[],localStorage.members){e.next=17;break}return e.next=12,axios.post("/api/members/get",{userID:o,teamID:r});case 12:l=e.sent,localStorage.members=JSON.stringify(l.data),l=l.data,e.next=18;break;case 17:l=JSON.parse(localStorage.members);case 18:return l.forEach((function(e,t){i.push({id:"@"+e.name,userId:e.id})})),Array.from(document.querySelectorAll(".single-channel")).forEach((function(e){s.push("#"+e.getAttribute("data-slug"))})),u=[],l.forEach((function(e,t){u.push(e.name)})),null!=window.tagify&&(window.tagify.removeAllTags(),window.tagify.destroy(),window.tagify=void 0),d=document.querySelector("#notify-new-thread"),window.tagify=new Tagify(d,{whitelist:u,enforceWhitelist:!0,dropdown:{classname:"color-blue",enabled:1,maxItems:5}}),document.querySelector("#editor")&&window.editor&&window.editor.destroy(),ClassicEditor.create(document.querySelector("#editor"),{toolbar:{items:["heading","|","bold","italic","link","highlight","bulletedList","numberedList","|","indent","outdent","|","imageUpload","blockQuote","codeBlock","insertTable","mediaEmbed","undo","redo"]},image:{toolbar:["imageTextAlternative","imageStyle:full","imageStyle:side"]},language:"en",mention:{feeds:[{marker:"@",feed:i,minimumCharacters:1},{marker:"#",feed:s,minimumCharacters:1}]},highlight:{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"hsla(58,92%,75%,.7)",type:"marker"},{model:"redMarker",class:"marker-red",title:"Red marker",color:"red",type:"marker"}]},typing:{transformations:{remove:["symbols","quotes","arrowLeft","arrowRight"],extra:[{from:":)",to:"üôÇ"},{from:":+1:",to:"üëç"},{from:":tada:",to:"üéâ"}]}}}).then((function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new c(e)},window.editor=e,t?window.editor.setData(t):window.editor.setData("")})),e.next=30,axios.post("/api/channel/get",{userID:o,teamID:r});case 30:m=e.sent,document.querySelector("#channel-select").innerHTML="",h="",m.data.forEach((function(e,t){h+='<option value="'.concat(e.id,'"># ').concat(e.channel_name,"</option>")})),document.querySelector("#channel-select").innerHTML='<option value="-1" selected="true">Choose a channel</option>'+h,document.querySelector("#new-post-title").focus();case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=i(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.editor.getData(),-1!=document.querySelector("#channel-select").value){e.next=4;break}return Notification.showToast("Please select a channel!"),e.abrupt("return");case 4:if(""!=document.querySelector("#new-post-title").value){e.next=7;break}return Notification.showToast("Please enter a subject."),e.abrupt("return");case 7:if(""!=t){e.next=10;break}return Notification.showToast("Please add some content."),e.abrupt("return");case 10:if(n=[],localStorage.members){e.next=19;break}return e.next=14,axios.post("/api/members/get",{userID:userID,teamID:teamID});case 14:n=e.sent,localStorage.members=JSON.stringify(n.data),n=n.data,e.next=20;break;case 19:n=JSON.parse(localStorage.members);case 20:r=[],Array.from(document.querySelectorAll(".new-thread-container .tagify__tag-text")).forEach((function(e){var t=n.filter((function(t){return t.name==e.textContent}));r.push(t[0].id)})),axios.post("/api/thread/create",{subject:document.querySelector("#new-post-title").value,content:t,teamID:document.querySelector("#teamid").value,channelID:document.querySelector("#channel-select").value,authorID:document.querySelector("#userid").value,peopleToNotify:r.toString()}).then((function(e){Threads.jumpToThread(document.querySelector("#channel-select").value,e.data.id),Notification.showToast("Thread created successfully.")})).catch((function(e){console.log(e)}));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=i(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.editor.getData(),""!=document.querySelector("#new-post-title").value){e.next=4;break}return Notification.showToast("Please enter a subject."),e.abrupt("return");case 4:if(""!=t){e.next=7;break}return Notification.showToast("Please add some content."),e.abrupt("return");case 7:if(n=document.querySelector(".single-channel.active").getAttribute("data-channel"),r=document.querySelector(".single-thread-header").getAttribute("thread-id"),o=[],localStorage.members){e.next=16;break}return e.next=13,axios.post("/api/members/get",{userID:userID,teamID:teamID});case 13:o=e.sent,e.next=17;break;case 16:o=JSON.parse(localStorage.members);case 17:i=[],Array.from(document.querySelectorAll(".new-thread-container .tagify__tag-text")).forEach((function(e){var t=o.filter((function(t){return t.name==e.textContent}));i.push(t[0].id)})),axios.post("/api/thread/update",{subject:document.querySelector("#new-post-title").value,content:t,teamID:document.querySelector("#teamid").value,channelID:n,threadID:r,authorID:document.querySelector("#userid").value,peopleToNotify:i.toString()}).then((function(e){Threads.jumpToThread(n,e.data.id),Notification.showToast("Thread updated successfully.")})).catch((function(e){console.log(e)})),document.querySelector("body").classList.remove("updating-thread"),document.querySelector("#post-menu").classList.remove("visible"),document.querySelector(".post-action-menu").classList.remove("visible"),document.querySelector(".single-thread-row").classList.remove("pushed");case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=i(a.a.mark((function e(t,n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="",o=JSON.parse(localStorage.getItem("comments")),o.filter((function(e){return e.thread_id==t})).forEach((function(e,t){var n="";e.author_id==$("#userid").val()&&(n='<div class="edit-comment" data-commentauthor="'.concat(e.author_id,'" data-commentid="').concat(e.id,'"><span>edit</span></div>')),e.guest_name?r+='<div class="comment row">\n            <div class="col-12 guest-col mb-2"><div class="guest"><b>Guest comment from</b> '.concat(e.guest_name,'</div></div>\n            <div class="col author-col guest-col"><div class="author round-btn"></div></div>\n            <div class="col-10 comment-col"><div class="comment-content">').concat(Renderer.renderContent(JSON.parse(e.comment)),"</div>").concat(n,"</div></div>"):r+='<div class="comment row">\n            <div class="col author-col"><div class="author round-btn" style="background-image: url('.concat(Config.api).concat(e.avatar,')" data-userid="').concat(e.author_id,'"></div></div>\n            <div class="col-10 comment-col"><div class="comment-content">').concat(Renderer.renderContent(JSON.parse(e.comment)),"</div>").concat(n,"</div></div>")})),$(".comment-list").html(r),n&&n();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=i(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector(".single-thread-header").getAttribute("thread-id"),e.next=3,axios.post("/api/thread/change",{threadID:t});case 3:n=e.sent,document.querySelector("#new-post-title").value=document.querySelector(".single-thread-header .subject h1").textContent,Threads.openEditor(n.data.content,document.querySelector(".single-thread-header .subject h1").textContent),document.querySelector("body").classList.add("no-threads"),document.querySelector("body").classList.add("updating-thread"),Array.from(document.querySelectorAll(".main-section")).forEach((function(e){e.classList.add("d-none")})),document.querySelector(".new-thread").classList.remove("d-none");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=i(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector(".single-channel.active").getAttribute("data-channel"),n=document.querySelector(".single-thread-header").getAttribute("thread-id"),r=document.querySelector("#teamid").value,o=1,document.querySelector("#thread-list .thread.active").classList.contains("is-pinned")&&(o=0),e.next=7,axios.post("/api/thread/pin",{threadID:n,teamID:r,isPinned:o});case 7:e.sent,Threads.jumpToThread(t,n),1==o?(Notification.showToast("Thread pinned to top successfully."),document.querySelector("#pin-thread span").textContent="Unpin"):(Notification.showToast("Thread unpinned successfully."),document.querySelector("#pin-thread span").textContent="Pin to top");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=i(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#move-thread-to-channel").value,n=document.querySelector(".single-thread-header").getAttribute("thread-id"),e.next=4,axios.post("/api/thread/move",{threadID:n,newChannel:t});case 4:e.sent,r=document.querySelector("#move-thread-to-channel").selectedOptions[0],document.querySelector("#post-menu").classList.remove("visible"),document.querySelector(".post-action-menu").classList.remove("visible"),document.querySelector(".single-thread-row").classList.remove("pushed"),Notification.showToast("Thread moved to <span>"+r.textContent+"</span> successfully."),Channels.changeChannel(t);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=i(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector(".single-channel.active").getAttribute("data-channel"),n=document.querySelector(".single-thread-header").getAttribute("thread-id"),r=document.querySelector("#thread-archive-text").value,e.next=5,axios.post("/api/thread/archive",{threadID:n,archivedText:r});case 5:e.sent,Overlay.close(),Notification.showToast("Thread was archived successfully."),Threads.jumpToThread(t,n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=i(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector(".single-channel.active").getAttribute("data-channel"),n=document.querySelector(".single-thread-header").getAttribute("thread-id"),r=document.querySelector("#userid").value,o=document.querySelector("#teamid").value,e.next=6,axios.post("/api/thread/delete",{threadID:n,teamID:o,authorID:r});case 6:e.sent,Overlay.close(),Notification.showToast("Thread was archived successfully."),Channels.changeChannel(t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=i(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector(".single-channel.active").getAttribute("data-channel"),n=document.querySelector(".single-thread-header").getAttribute("thread-id"),r=document.querySelector("#teamid").value,o=document.querySelector("#userid").value,i=1,document.querySelector(".single-thread-header").classList.contains("is-public")&&(i=0),e.next=8,axios.post("/api/thread/public",{teamID:r,threadID:n,userID:o,isPublic:i});case 8:e.sent,1==i?(Notification.showToast("Thread is now public."),document.querySelector("#confirm-make-thread-public").classList.remove("btn-green"),document.querySelector("#confirm-make-thread-public").classList.add("btn-red"),document.querySelector("#confirm-make-thread-public").textContent="Make thread private"):(Notification.showToast("Thread is no longer public."),document.querySelector("#confirm-make-thread-public").classList.remove("btn-red"),document.querySelector("#confirm-make-thread-public").classList.add("btn-green"),document.querySelector("#confirm-make-thread-public").textContent="Make thread public"),Threads.jumpToThread(t,n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=i(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.querySelector("#teamid").value,n=[],localStorage.members){e.next=9;break}return e.next=5,axios.post("/api/members/get",{teamID:t});case 5:n=e.sent,localStorage.members=JSON.stringify(n.data),e.next=10;break;case 9:n=JSON.parse(localStorage.members);case 10:r=[],o=[],n.forEach((function(e,t){r.push(e),o.push(e.name)})),null!=window.tagify&&(window.tagify.removeAllTags(),window.tagify.destroy(),window.tagify=void 0),i=document.querySelector("#new-owner-list"),window.tagify=new Tagify(i,{whitelist:o,enforceWhitelist:!0,dropdown:{classname:"color-blue",enabled:1,maxItems:1}}).on("add",(function(e){var t=e.detail.data.value,n=r.find((function(e){return e.name==t}));document.querySelector(".change-owner-dialog").setAttribute("new-user",n.id)})).on("remove",(function(e){document.querySelector(".change-owner-dialog").setAttribute("new-user","")})),document.querySelector(".new-owner-list").focus();case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=i(a.a.mark((function e(){var n,r,o,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.querySelector(".change-owner-dialog").getAttribute("content-type"),r=document.querySelector(".change-owner-dialog").getAttribute("content-id"),o=document.querySelector(".change-owner-dialog").getAttribute("new-user"),e.next=5,axios.post("/api/thread/change-owner",{contentType:n,contentID:r,newUserID:o});case 5:(i=e.sent)&&200==i.status&&(s=document.querySelector(".single-channel.active").getAttribute("data-channel"),c=document.querySelector(".single-thread-header").getAttribute("thread-id"),"thread"==n?t(s,c):Threads.changeThread(parseInt(c),null,null,!0),Overlay.close());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=i(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/thread/markread",{channelID:t,threadID:n,userID:r});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=i(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/thread/highlight",{threadID:t});case 2:(n=e.sent)&&200==n.status?(Notification.showToast("Thread successfully highlighted."),Overlay.close()):Notification.showToast("Thread could not be highlighted.");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=i(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/thread/remove-highlight",{threadID:t});case 2:(n=e.sent)&&200==n.status?(document.querySelector(".activity-list .highlighted-thread").classList.add("d-none"),document.querySelector(".remove-highlight").classList.add("d-none"),Notification.showToast("Highlight removed successfully.")):Notification.showToast("Highlight coudn't be removed.");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{changeThread:function(t,n,r,a){return e.apply(this,arguments)},jumpToThread:t,openEditor:function(e,t){return r.apply(this,arguments)},saveThread:function(){return o.apply(this,arguments)},updateThread:function(){return s.apply(this,arguments)},renderComments:function(e,t){return l.apply(this,arguments)},edit:function(){return u.apply(this,arguments)},togglePin:function(){return d.apply(this,arguments)},move:function(){return m.apply(this,arguments)},archive:function(){return h.apply(this,arguments)},remove:function(){return p.apply(this,arguments)},togglePublic:function(){return f.apply(this,arguments)},showChangeOwnerDialog:function(){return v.apply(this,arguments)},changeOwner:function(){return g.apply(this,arguments)},highlightThread:function(e){return w.apply(this,arguments)},removeHighlight:function(e){return b.apply(this,arguments)},markRead:function(e,t,n){return y.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,c,"next",e)}function c(e){i(o,r,a,s,c,"throw",e)}s(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loader=t}var t,n,r;return t=e,(n=[{key:"upload",value:function(){var e=document.querySelector("#teamid").value;return this.loader.file.then((function(t){return new Promise((function(n,r){var a=new FormData;a.append("image",t),axios.post("/api/file/".concat(e,"/upload"),a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){n({default:e.data})}))}))}))}},{key:"abort",value:function(){Notification.showToast("Upload failed. Please try again.")}}])&&c(t.prototype,n),r&&c(t,r),e}();window.Comments=function(){function e(){return(e=s(a.a.mark((function e(t,n,r){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/comments/load",{threadID:t});case 2:o=e.sent,Renderer.render("comments",o.data,null,!0).then((function(){var e=new IntersectionObserver((function(e,n){if(e&&e[0]&&e[0].isIntersecting){var r=document.querySelectorAll(".comment-list > div").length;Comments.loadMoreComments(t,r),n.unobserve(document.querySelector(".comment-list > div:last-of-type"))}}));if(document.querySelector(".comment-list > div")&&e.observe(document.querySelector(".comment-list > div:last-of-type")),document.querySelector("#thread-list .thread.active")&&document.querySelector("#thread-list .thread.active").classList.contains("is-archived")?document.querySelector(".new-comment").classList.add("d-none"):document.querySelector(".new-comment")&&(document.querySelector(".new-comment").classList.remove("d-none"),window.requestAnimationFrame(Comments.initCommentEditor)),n||(n=window.location.hash),n){var a=document.querySelector("[data-comment-hash='"+n+"']");if(a){var o=a.offsetTop-80;a.classList.add("active-comment"),document.querySelector(".single-thread-row").scrollTop=o}}document.querySelector(".single-thread-row oembed")&&Embeds.convertEmbeds(),r&&r()}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=s(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/comments/load",{threadID:t,offset:n});case 2:if(0!=(r=e.sent).data.length){e.next=8;break}return document.querySelector(".comment-list > div:last-of-type").classList.add("last-comment"),e.abrupt("return");case 8:Renderer.loadMoreComments(r.data).then((function(){document.querySelector(".single-thread-row oembed")&&Embeds.convertEmbeds(),new IntersectionObserver((function(e,n){if(e&&e[0]&&e[0].isIntersecting){var r=document.querySelectorAll(".comment-list > div").length;Comments.loadMoreComments(t,r),n.unobserve(document.querySelector(".comment-list > div:last-of-type"))}})).observe(document.querySelector(".comment-list > div:last-of-type"))}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=s(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.querySelectorAll(".comment-list > div").length,e.next=3,axios.post("/api/comments/loadAll",{threadID:t});case 3:r=e.sent,Renderer.render("comments",r.data,null,!0).then((function(){document.querySelector("#thread-list .thread.active")&&document.querySelector("#thread-list .thread.active").classList.contains("is-archived")?document.querySelector(".new-comment").classList.add("d-none"):document.querySelector(".new-comment")&&(document.querySelector(".new-comment").classList.remove("d-none"),window.requestAnimationFrame(Comments.initCommentEditor)),document.querySelector(".single-thread-row oembed")&&Embeds.convertEmbeds(),n&&n()}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=s(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#teamid").value,n=document.querySelector("#userid").value,r=[],o=[],e.next=6,axios.post("/api/members/get",{userID:n,teamID:t});case 6:e.sent.data.forEach((function(e,t){r.push({id:"@"+e.name,userId:e.id})})),Array.from(document.querySelectorAll(".single-channel")).forEach((function(e){o.push("#"+e.getAttribute("data-slug"))})),document.querySelector("#new-comment")&&window.commenteditor&&window.commenteditor.destroy(),"undefined"!=typeof ClassicEditor&&ClassicEditor.create(document.querySelector("#new-comment"),{toolbar:{items:["heading","|","bold","italic","link","highlight","bulletedList","numberedList","|","indent","outdent","|","imageUpload","blockQuote","codeBlock","insertTable","mediaEmbed","undo","redo"]},image:{toolbar:["imageTextAlternative","imageStyle:full","imageStyle:side"]},language:"en",mention:{feeds:[{marker:"@",feed:r,minimumCharacters:1},{marker:"#",feed:o,minimumCharacters:1}]},highlight:{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"hsla(58,92%,75%,.7)",type:"marker"},{model:"redMarker",class:"marker-red",title:"Red marker",color:"red",type:"marker"}]}}).then((function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new l(e)},window.commenteditor=e}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=s(a.a.mark((function e(t,n,r){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(o=window.commenteditor.getData())){e.next=4;break}return Notification.showToast("Please type something to comment on this thread."),e.abrupt("return");case 4:axios.post("/api/thread/comment/update",{content:o,authorID:t,threadID:n,commentID:r}).then((function(e){e&&200==e.status&&(document.querySelector(".editing-comment .comment-content").innerHTML=o,document.querySelector(".editing-comment").classList.remove("editing-comment"),document.querySelector(".btn.add-comment").textContent="Comment",window.commenteditor.setData(""),document.querySelector("#edit-comment").classList.add("d-none"),document.querySelector("#add-comment").classList.remove("d-non"),Notification.showToast("Comment updated successfully."))})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=s(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/thread/comment/remove",{commentID:t});case 2:(n=e.sent)&&200==n.status&&(document.querySelector("[data-full-comment-id='"+t+"']").classList.add("d-none"),Notification.showToast("Comment removed successfully."));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{loadComments:function(t,n,r){return e.apply(this,arguments)},loadMoreComments:function(e,n){return t.apply(this,arguments)},loadAllComments:function(e,t){return n.apply(this,arguments)},initCommentEditor:function(){return r.apply(this,arguments)},postComment:function(){var e=window.commenteditor.getData(),t=document.querySelector("#teamid").value,n=document.querySelector("#userid").value;""!=e?axios.post("/api/thread/comment",{content:e,teamID:t,authorID:n,channelID:document.querySelector(".single-channel.active").getAttribute("data-channel"),threadID:document.querySelector(".single-thread-header").getAttribute("thread-id")}).then((function(t){var r=document.querySelector(".menu-area #avatar").style.backgroundImage.trim(),a=r.substring(5,r.length-2),i='<div class="comment-menu-btn"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></div><div class="comment-menu">';i+='<div class="comment-btn edit-comment" data-commentauthor="'.concat(n,'" data-commentid="').concat(t.data.id,'" data-threadid="').concat(t.data.thread_id,'"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34"></path><polygon points="18 2 22 6 12 16 8 16 8 12 18 2"></polygon></svg>&nbsp;<span>edit</span></div>'),i+='<div class="comment-btn delete-comment" data-commentauthor="'.concat(n,'" data-commentid="').concat(t.data.id,'" data-threadid="').concat(t.data.thread_id,'"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>&nbsp;<span>delete</span></div>'),i+="</div>";var s=new Date,c=o(new Intl.DateTimeFormat("en",{year:"numeric",month:"short",day:"2-digit"}).formatToParts(s),5),l=c[0].value,u=c[2].value,d=c[4].value,m='<div class="comment row" data-full-comment-id="'.concat(t.data.id,'" data-comment-hash="#').concat(t.data.comment_hash,'">\n                <div class="col author-col">\n                  <div class="author round-btn" style="background-image: url(').concat(a,')" data-userid="').concat(n,'"></div>\n                </div>\n\n                <div class="col-12 col-md-10 comment-col">\n                  <div class="row">\n                    <div class="col-8">\n                      <b class="d-block mb-3">You</b>\n                    </div>\n                    <div class="col-4 text-right date-col">\n                      <time>').concat(u,". ").concat(l," ").concat(d,'</time>\n                    </div>\n\n                    <div class="col-12 col-md-10">\n                      <div class="comment-content ck-content">').concat(e,"</div>\n                    </div>\n                  </div>\n                </div>\n                ").concat(i,"\n            </div>");document.querySelector(".comment-list").innerHTML=document.querySelector(".comment-list").innerHTML+m,window.commenteditor.setData(""),Notification.showToast("Comment saved successfully.")})).catch((function(e){console.log(e)})):Notification.showToast("Please type something to comment on this thread.")},editComment:function(e,t,n){return i.apply(this,arguments)},removeComment:function(e){return c.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Followups=function(){function e(){return(e=i(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#teamid").value,n=document.querySelector("#userid").value,e.next=4,axios.post("/api/followups/get",{userID:n,teamID:t});case 4:r=e.sent,Renderer.render("followups",r.data),State.updateURL("followups","followups");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/followups/create",{teamID:document.querySelector("#teamid").value,userID:document.querySelector("#userid").value,threadID:t}).catch((function(e){Notification.showToast("Thread is already marked as follow-up.")}));case 2:(n=e.sent)&&200==n.status&&(document.querySelector(".add-follow-up").classList.add("has-followup"),document.querySelector(".add-follow-up").setAttribute("data-followup-id",n.data.followup_id),Notification.showToast("Follow-up created successfully."));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=i(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/followups/remove",{followupID:t,userID:document.querySelector("#userid").value}).catch((function(e){Notification.showToast("Follow-up couldn't be removed.")}));case 2:(n=e.sent)&&200==n.status&&(Notification.showToast("Follow-up removed successfully."),document.querySelector(".add-follow-up").classList.remove("has-followup"),document.querySelector(".followups-view div[followup-id='"+t+"']").style.display="none",document.querySelector("#thread-list .thread.active .has-folloup")&&document.querySelector("#thread-list .thread.active .has-folloup").classList.add("d-none"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{getFollowups:function(){return e.apply(this,arguments)},addFollowup:function(e){return t.apply(this,arguments)},removeFollowup:function(e){return n.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Mentions=function(){function e(){return(e=i(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#teamid").value,n=document.querySelector("#userid").value,e.next=4,axios.post("/api/mentions/get",{userID:n,teamID:t});case 4:r=e.sent,Renderer.render("mentions",r.data),State.updateURL("mentions","mentions");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.querySelector("#userid").value,e.next=3,axios.post("/api/mentions/remove",{mentionID:t,userID:n});case 3:(r=e.sent)&&200==r.status?(document.querySelector("#mentions-feed").removeChild(document.querySelector('#mentions-feed [mention-id="'+t+'"]')),Notification.showToast("Mention marked as read successfully."),o=document.querySelector("#mentions-feed").childElementCount,document.querySelector(".amount-mentions").textContent=o,0==o&&document.querySelector(".amount-mentions").classList.add("d-none")):Notification.showToast("Could not mark mention as read, please try again.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{getMentions:function(){return e.apply(this,arguments)},markRead:function(e){return t.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Members=function(){function e(){return(e=i(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#teamid").value,n=document.querySelector("#userid").value,e.next=4,axios.post("/api/members/get",{userID:n,teamID:t});case 4:r=e.sent,Renderer.render("members",r.data),State.updateURL("members","members");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(t,n,r){var o,i,s,c,l,u,d,m,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=document.querySelector("#teamid").value,i="",!t){e.next=6;break}return e.next=5,axios.post("/api/user/getuser",{userID:t,teamID:o});case 5:i=e.sent;case 6:if(!n){e.next=10;break}return e.next=9,axios.post("/api/user/getuserbyname",{userName:n,teamID:o});case 9:i=e.sent;case 10:if(null!=(i=i.data)){e.next=14;break}return Notification.showToast("It looks like this person is not registered yet."),e.abrupt("return");case 14:return t=i.id,e.next=17,axios.post("/api/activity/getActivityForUser",{userID:t,teamID:o});case 17:s=e.sent,document.querySelector("#sidebar *").classList.remove("active"),document.querySelector(".single-channel.active")&&document.querySelector(".single-channel.active").classList.remove("active"),document.querySelector("#members").classList.add("active"),s&&200==s.status&&(c=s.data.threads,l=s.data.comments,i.avatar||(i.avatar="/img/octo-ghost.png"),document.querySelector(".custom-profile-fields").innerHTML="",i.customfields&&(u="",i.customfields.forEach((function(e,t){u+='<div class="col-12 col-md-4 custom-field-col"><label>'.concat(e.field_name,"</label><p>").concat(e.field_value,"</p></div>")})),document.querySelector(".custom-profile-fields").innerHTML=u),document.querySelector("#user-profile .profile-image").style.backgroundImage='url("'.concat(i.avatar,'")'),document.querySelector("#user-profile .user-link").innerHTML="-",document.querySelector("#user-profile .user-bio").innerHTML="-",document.querySelector("#user-profile .user-location").innerHTML="-",document.querySelector("#user-profile .user-timezone").innerHTML="-",document.querySelector("#user-profile .user-name").innerHTML="-",i.name&&(document.querySelector("#user-profile .user-name").innerHTML=i.name),i.status&&(document.querySelector("#user-profile .user-status").innerHTML=i.status),i.link&&(document.querySelector("#user-profile .user-link").innerHTML=i.link,document.querySelector("#user-profile .user-link").setAttribute("href",i.link)),i.bio&&(document.querySelector("#user-profile .user-bio").innerHTML="<p>"+i.bio+"</p>"),i.location&&(document.querySelector("#user-profile .user-location").innerHTML=i.location),i.timezone&&(document.querySelector("#user-profile .user-timezone").innerHTML=i.timezone),i.interests?(d="",i.interests.split(",").forEach((function(e,t){d+='<div class="tag interest">'.concat(e,"</div>")})),document.querySelector(".user-interests").innerHTML=d,document.querySelector(".intersts-row").classList.remove("d-none")):document.querySelector(".intersts-row").classList.add("d-none"),Array.from(document.querySelectorAll(".social-link")).forEach((function(e){e.classList.add("d-none")})),i.facebook&&(document.querySelector(".social-link.facebook").setAttribute("href","https://facebook.com/"+i.facebook),document.querySelector(".social-link.facebook").classList.remove("d-none")),i.twitter&&(document.querySelector(".social-link.twitter").setAttribute("href","https://twitter.com/"+i.twitter),document.querySelector(".social-link.twitter").classList.remove("d-none")),i.instagram&&(document.querySelector(".social-link.instagram").setAttribute("href","https://instagram.com/"+i.instagram),document.querySelector(".social-link.instagram").classList.remove("d-none")),i.spotify&&(document.querySelector(".social-link.spotify").setAttribute("href","https://open.spotify.com/user/"+i.spotify),document.querySelector(".social-link.spotify").classList.remove("d-none")),i.youtube&&(document.querySelector(".social-link.youtube").setAttribute("href","https://youtube.com/"+i.youtube),document.querySelector(".social-link.youtube").classList.remove("d-none")),i.linkedin&&(document.querySelector(".social-link.linkedin").setAttribute("href","https://linkedin.com/in/"+i.linkedin),document.querySelector(".social-link.linkedin").classList.remove("d-none")),document.querySelector(".profile-last-threads").innerHTML="",document.querySelector(".profile-last-comments").innerHTML="",m="",c.forEach((function(e,t){var n=e.content;e.channel_id&&(m+='<div class="thread jumpto-thread" thread-id="'.concat(e.thread_id,'" channel-id="').concat(e.channel_id,'" thread-id="').concat(e.thread_id,'">\n                <div class="row no-gutters p-2">\n                  <div class="col-9 thread-headline"><b>').concat(e.subject,'</b></div>\n                  <div class="col-3 post-from text-right">').concat(Helper.calcTimePast(e.date),'</div>\n                  <div class="post-excerpt">').concat(Helper.stripHTML(n).substring(0,75),"...</div>\n                </div>\n              </div>"))})),h="",l.forEach((function(e,t){var n=e.comment;h+='<div class="thread jumpto-thread" thread-id="'.concat(e.thread_id,'" channel-id="').concat(e.channel_id,'" thread-id="').concat(e.thread_id,'">\n              <div class="row no-gutters p-2">\n                <div class="col-9 thread-headline"><b>').concat(i.name,' commented:</b></div>\n                <div class="col-3 post-from text-right">').concat(Helper.calcTimePast(e.date),'</div>\n                <div class="post-excerpt">').concat(Helper.stripHTML(n).substring(0,75),"...</div>\n              </div>\n            </div>")})),document.querySelector(".profile-last-threads").innerHTML=m,document.querySelector(".profile-last-comments").innerHTML=h,Array.from(document.querySelectorAll(".main-section")).forEach((function(e){e.classList.add("d-none")})),document.querySelector("body").classList.add("no-threads"),document.querySelector("#user-profile").classList.remove("d-none"),document.getElementById("user-profile").scrollTop=0),r||State.updateURL("members","members/"+i.name_slug);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=i(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/user/getDiscourseIDByName",{oldUserName:t});case 2:if(!(n=e.sent)||200!=n.status){e.next=7;break}n.data&&n.data.original_user_id?Members.showProfile(n.data.original_user_id):Members.showProfile(null,t),e.next=9;break;case 7:return Notification.showToast("It looks like this person is not registered yet."),e.abrupt("return");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=i(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector(".edit-member-dialog").getAttribute("data-member-id"),n=document.querySelector("#teamid").value,e.next=4,axios.post("/api/members/remove",{userID:t,teamID:n});case 4:(r=e.sent)&&200==r.status&&(document.querySelector("div[data-member-id='"+t+"']").parentNode.style.display="none",Notification.showToast("User removed successfully."),Overlay.close());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=i(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#change-role").value,n=document.querySelector(".edit-member-dialog").getAttribute("data-member-id"),e.next=4,axios.post("/api/members/update",{userID:n,role:t});case 4:(r=e.sent)&&200==r.status&&(document.querySelector("div[data-member-id='"+n+"'] .role").classList.remove("admin"),document.querySelector("div[data-member-id='"+n+"'] .role").classList.remove("member"),document.querySelector("div[data-member-id='"+n+"'] .role").classList.remove("owner"),document.querySelector("div[data-member-id='"+n+"'] .role").classList.add(t),document.querySelector("div[data-member-id='"+n+"'] .role").textContent=t,Notification.showToast("User updated successfully."),Overlay.close());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=i(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/members/search",{query:t});case 2:(n=e.sent)&&200==n.status&&(Array.from(document.querySelectorAll("#member-list .member")).forEach((function(e){e.parentNode.classList.add("d-none")})),Renderer.render("members",n.data),document.querySelector(".loading-member-filter").classList.add("d-none"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{getMembers:function(){return e.apply(this,arguments)},showProfile:function(e,n,r){return t.apply(this,arguments)},showProfileByName:function(e){return n.apply(this,arguments)},removeMember:function(){return r.apply(this,arguments)},updateMember:function(){return o.apply(this,arguments)},filterMembers:function(e){return s.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Messages=function(){function e(){return(e=i(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#teamid").value,n=document.querySelector("#userid").value,document.querySelector("body").classList.remove("no-threads"),document.querySelector(".chat-container").classList.add("d-none"),document.querySelector(".new-convo").classList.remove("d-none"),e.next=7,axios.post("/api/messages/get",{userID:n,teamID:t});case 7:r=e.sent,Renderer.render("conversations",r.data),State.updateURL("messages","messages");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.querySelector("#teamid").value,n=document.querySelector("#userid").value,!localStorage.members){e.next=6;break}r=JSON.parse(localStorage.members),e.next=10;break;case 6:return e.next=8,axios.post("/api/members/get",{userID:n,teamID:t});case 8:r=(r=e.sent).data;case 10:o=[],r.forEach((function(e,t){o.push(e.name)})),null!=window.tagify&&(window.tagify.removeAllTags(),window.tagify.destroy(),window.tagify=void 0),i=document.querySelector("#new-convo-list"),window.tagify=new Tagify(i,{whitelist:o,enforceWhitelist:!0,dropdown:{classname:"color-blue",enabled:1,maxItems:5}}),Overlay.show(".conversation-dialog");case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=i(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.querySelector("#teamid").value,n=document.querySelector("#userid").value,r=[n],o=[],!localStorage.members){e.next=8;break}i=JSON.parse(localStorage.members),e.next=12;break;case 8:return e.next=10,axios.post("/api/members/get",{userID:n,teamID:t});case 10:i=(i=e.sent).data;case 12:return Array.from(document.querySelectorAll(".conversation-dialog .tagify__tag-text")).forEach((function(e){var t=i.filter((function(t){return t.name==e.textContent}));r.push(t[0].id),o.push(t)})),e.next=15,axios.post("/api/messages/create-conversation",{teamID:t,userID:n,participants:r.toString()});case 15:e.sent,Messages.getMessages(),Overlay.close();case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=i(a.a.mark((function e(t){var n,r,o,i,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.querySelector("#teamid").value,r=document.querySelector("#userid").value,document.querySelector(".new-convo").classList.add("d-none"),!localStorage.members){e.next=7;break}o=JSON.parse(localStorage.members),e.next=11;break;case 7:return e.next=9,axios.post("/api/members/get",{userID:r,teamID:n});case 9:o=(o=e.sent).data;case 11:return e.next=13,axios.post("/api/messages/get-messages",{userID:r,teamID:n,convoID:t});case 13:i=e.sent,s="",c="",i.data.forEach((function(e,t){var n="";c==e.sender_id&&(n="no-img");var a=o.filter((function(t){return t.id==e.sender_id}));e.sender_id==r?s+='<div class="message-item row no-gutters mine '.concat(n,'">\n              <div class="col-11 justify-content-right text-right">\n                <div class="bubble" data-tippy-content="').concat(Helper.calcTimePast(e.time),'">\n                  ').concat(e.message,'\n                </div>\n              </div>\n              <div class="col-1 my-auto text-right">\n                <div class="round-btn participant-img" data-userid="').concat(e.sender_id,'" style="background-image: url(').concat(a[0].avatar,')"></div>\n              </div>\n            </div>'):s+='<div class="message-item row no-gutters '.concat(n,'">\n                <div class="col-1 my-auto text-left">\n                  <div class="round-btn participant-img" data-userid="').concat(e.sender_id,'" style="background-image: url(').concat(a[0].avatar,')"></div>\n                </div>\n                <div class="col-11 justify-content-left text-left">\n                  <div class="bubble" data-tippy-content="').concat(Helper.calcTimePast(e.time),'">\n                    ').concat(e.message,"\n                  </div>\n                </div>\n              </div>"),c=e.sender_id})),document.querySelector(".main-section").classList.add("d-none"),document.querySelector(".messages-view").classList.remove("d-none"),document.querySelector(".chat-container").classList.remove("d-none"),document.querySelector("#chat").innerHTML=s,document.querySelector("#chat-input").focus(),tippy("[data-tippy-content]"),(l=document.getElementById("chat")).scrollTop=l.scrollHeight,document.querySelector(".main-link#messages").classList.add("active");case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=i(a.a.mark((function e(t){var n,r,o,i,s,c,l,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=parseInt(document.querySelector("#userid").value),r=document.querySelector("#teamid").value,o=document.querySelector("[convo-id].active").getAttribute("convo-id"),e.next=5,axios.post("/api/messages/add",{convoID:o,senderID:n,message:t});case 5:if(e.sent,i="",!localStorage.members){e.next=11;break}s=JSON.parse(localStorage.members),e.next=15;break;case 11:return e.next=13,axios.post("/api/members/get",{userID:n,teamID:r});case 13:s=(s=e.sent).data;case 15:c=s.filter((function(e){return e.id==n})),document.querySelector("#chat > div:last-of-type .participant-img")&&document.querySelector("#chat > div:last-of-type .participant-img").getAttribute("data-userid")==n&&(i="no-img"),l="",n==document.querySelector("#userid").value?l+='<div class="message-item row no-gutters mine '.concat(i,'">\n            <div class="col-11 justify-content-right text-right">\n              <div class="bubble">\n                ').concat(t,'\n              </div>\n            </div>\n            <div class="col-1 my-auto text-right">\n              <div class="round-btn participant-img" data-userid="').concat(n,'" style="background-image: url(').concat(c[0].avatar,')"></div>\n            </div>\n          </div>'):l+='<div class="message-item row no-gutters '.concat(i,'">\n            <div class="col-1 my-auto text-left">\n              <div class="round-btn participant-img" data-userid="').concat(n,'" style="background-image: url(').concat(c[0].avatar,')"></div>\n            </div>\n            <div class="col-11 justify-content-left text-left">\n              <div class="bubble">\n                ').concat(t,"\n              </div>\n            </div>\n          </div>"),document.querySelector("#chat").innerHTML=document.querySelector("#chat").innerHTML+l,document.querySelector("#chat-input").value="",(u=document.getElementById("chat")).scrollTop=u.scrollHeight;case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=i(a.a.mark((function e(){var t,n,r,o,i,s,c,l,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#userid").value,n=document.querySelector("#teamid").value,r=document.querySelector("[convo-id].active").getAttribute("convo-id"),e.next=5,axios.post("/api/messages/get-conversation",{convoID:r});case 5:if(o=e.sent,i="",s=[],o.data.participants.forEach((function(e,t){i+='<li data-user-id="'.concat(e.id,'"><a href="#">\n                        <div class="commentator round-btn" style="background-image: url(').concat(e.avatar,')"></div><span>').concat(e.name,'</span>\n                        <div class="btn btn-empty remove-from-convo">remove</div>\n                      </a></li>')})),document.querySelector(".convo-member-list").innerHTML=i,!localStorage.members){e.next=14;break}c=JSON.parse(localStorage.members),e.next=18;break;case 14:return e.next=16,axios.post("/api/members/get",{userID:t,teamID:n});case 16:c=(c=e.sent).data;case 18:l=[],c.forEach((function(e,t){s.includes(e.name)||l.push(e.name)})),null!=window.tagify&&(window.tagify.removeAllTags(),window.tagify.destroy(),window.tagify=void 0),u=document.querySelector("#add-to-convo-list"),window.tagify=new Tagify(u,{whitelist:l,enforceWhitelist:!0,dropdown:{classname:"color-blue",enabled:1,maxItems:5}}),Overlay.show(".conversation-options-dialog");case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=i(a.a.mark((function e(){var t,n,r,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.querySelector("#userid").value,n=document.querySelector("#teamid").value,r=document.querySelector("[convo-id].active").getAttribute("convo-id"),!localStorage.members){e.next=7;break}o=JSON.parse(localStorage.members),e.next=11;break;case 7:return e.next=9,axios.post("/api/members/get",{userID:t,teamID:n});case 9:o=(o=e.sent).data;case 11:return i=[],Array.from(document.querySelectorAll(".conversation-options-dialog .convo-member-list li")).forEach((function(e){var t=e.getAttribute("data-user-id");i.push(t)})),Array.from(document.querySelectorAll(".conversation-options-dialog .tagify__tag-text")).forEach((function(e){var t=o.filter((function(t){return t.name==e.textContent}));i.push(t[0].id)})),e.next=16,axios.post("/api/messages/addmembers",{userID:t,teamID:n,newMembers:i.toString(),convoID:r});case 16:(s=e.sent)&&200==s.status&&(Messages.getMessages(),Notification.showToast("User added from conversation successfully."),Overlay.close());case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=i(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.querySelector("#userid").value,r=document.querySelector("#teamid").value,o=document.querySelector("[convo-id].active").getAttribute("convo-id"),e.next=5,axios.post("/api/messages/removemember",{userID:n,teamID:r,convoID:o,memberID:t});case 5:e.sent,document.querySelector(".conversation-options-dialog li[data-user-id='"+t+"']").parentNode.removeChild(document.querySelector(".conversation-options-dialog li[data-user-id='"+t+"']")),Notification.showToast("User removed from conversation successfully.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{render:function(e){return r.apply(this,arguments)},getMessages:function(){return e.apply(this,arguments)},sendMessage:function(e){return o.apply(this,arguments)},createConversation:function(){return n.apply(this,arguments)},jumpTo:function(e){Messages.renderAll((function(){Messages.render(e),document.querySelector("[convo-id="+e+"]").classList.add("active")}))},showMessageOptions:function(){return s.apply(this,arguments)},addToConversation:function(){return c.apply(this,arguments)},removeFromConversation:function(e){return l.apply(this,arguments)},showNewConvoDialog:function(){return t.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,c,"next",e)}function c(e){i(o,r,a,s,c,"throw",e)}s(void 0)}))}}window.Renderer=function(){function e(){return(e=s(a.a.mark((function e(t,n,r,i){var s,c,l,u,d,m,h,p,f,v,g,y,w,b,S,x,k,q,T,L,D;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=7;break}return s=document.querySelector("#teamid").value,c=document.querySelector("#userid").value,e.next=5,axios.post("/api/user/getuser",{userID:c,teamID:s});case 5:l=e.sent,r=l.data;case 7:document.querySelector("body").classList.remove("updating-thread"),document.querySelector("#post-menu").classList.remove("visible"),document.querySelector(".post-action-menu").classList.remove("visible"),document.querySelector(".single-thread-row").classList.remove("pushed"),"threads"==t&&new Promise((function(e,t){document.querySelector(".single-thread-additional").classList.add("d-none"),document.querySelector("#thread-list").innerHTML="";var a="",o="";n.forEach((function(e,t){if(e.content){var n="",r="",i="",s="",c="";e.followups&&e.followups.length>0&&(n='<div class="bumper has-folloup"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-zap"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg></div>'),e.mention_content_id&&(r='<div class="bumper has-mention"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg></div>'),1==e.archived_thread&&(i="is-archived"),1==e.public_thread&&(s="is-public");var l=Helper.getTimestamp("2020-07-13 06:00:00");if(e.seen){var u=Helper.getTimestamp(e.last_update),d=Helper.getTimestamp(e.seen.last_seen);Math.abs(u)>=Math.abs(d)&&Math.abs(u)>l&&Math.abs(u)-Math.abs(d)>5&&(c='<div class="unseen" data-tippy-content="Unread"></div>')}else{var m=Helper.getTimestamp(e.last_update);Math.abs(m)>l&&(c='<div class="unseen" data-tippy-content="Unread"></div>')}var h="";e.participants&&e.participants.length>0&&e.participants.forEach((function(e,t){0!=e.id&&t<=4&&(t<4?e.avatar?h+='<div class="commentator round-btn" style="background-image: url(\''.concat(e.avatar,"')\"></div>"):e.original_avatar?h+='<div class="commentator round-btn" style="background-image: url(\''.concat(e.original_avatar,"')\"></div>"):h+='<div class="commentator round-btn" style="background-image: url(\'/img/octo-ghost.png\')"></div>':h+='<div class="commentator more-commentators round-btn"></div>')}));var p=e.content;e.isPinned?o+='<a href="'.concat(e.thread_slug,'" class="thread is-pinned ').concat(i," ").concat(s,'" thread-slug="').concat(e.thread_slug,'" thread-id="').concat(e.thread_id,'">\n                            ').concat(c,'\n                            <div class="row no-gutters">\n                                <div class="col-9 post-headline">').concat(e.subject,'</div>\n                                <div class="col-3 post-from text-right">').concat(Helper.calcTimePast(e.date),'</div>\n                                <div class="post-excerpt">\n                                  ').concat(Helper.stripHTML(p).substring(0,75),'...\n                                </div>\n                            </div>\n                            <div class="row mt-3">\n                                <div class="col-6 footer-col">\n                                    <div class="commentators">\n                                      ').concat(h,'\n                                    </div>\n                                </div>\n                                <div class="col-6 footer-col">\n                                  <div class="bumper is-pinned"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11.5" cy="8.5" r="5.5"/><path d="M11.5 14v7"/></svg></div>\n                                  ').concat(n,"\n                                  ").concat(r,"\n                                </div>\n                            </div>\n                        </a>"):a+='<a href="'.concat(e.thread_slug,'" class="thread ').concat(i," ").concat(s,'" thread-slug="').concat(e.thread_slug,'" thread-id="').concat(e.thread_id,'">\n                            ').concat(c,'\n                            <div class="row no-gutters">\n                                <div class="col-9 post-headline">').concat(e.subject,'</div>\n                                <div class="col-3 post-from text-right">').concat(Helper.calcTimePast(e.date),'</div>\n                                <div class="post-excerpt">\n                                  ').concat(Helper.stripHTML(p).substring(0,75),'...\n                                </div>\n                            </div>\n                            <div class="row mt-3">\n                                <div class="col-6 footer-col">\n                                    <div class="commentators">\n                                      ').concat(h,'\n                                    </div>\n                                </div>\n                                <div class="col-6 footer-col">\n                                  ').concat(n,"\n                                  ").concat(r,"\n                                </div>\n                            </div>\n                        </a>")}})),document.querySelector("#thread-count").innerHTML="".concat(n.length," threads"),1!=n.length||n[0].content?document.querySelector("#thread-list").classList.remove("empty"):document.querySelector("#thread-list").classList.add("empty");var s="";if(n.length>9&&(s='<div class="load-more"><span>Load more</span><div class="spinner"></div></div>'),o&&(document.querySelector("#thread-list").innerHTML=o+a+s),!o&&a&&(document.querySelector("#thread-list").innerHTML=a+s),!i){var c="";n[0].description&&(n[0].description&&n[0].description.length>250&&(n[0].description=n[0].description.substring(0,250)+"..."),c="<p>".concat(n[0].description,"</p>"));var l=n[0].channel_image;l||(l="/img/channel-img.jpg"),"admin"!=r.role&&"owner"!=r.role?document.querySelector(".single-thread-rendered").innerHTML='<div class="channel-img" style="background-image: url('.concat(l,')"></div><div class="channel-intro">\n              <h2># ').concat(n[0].channel_name,"</h2>\n              ").concat(c,'\n            <div class="leaderboard row"></div></div>'):document.querySelector(".single-thread-rendered").innerHTML='<div class="channel-img" style="background-image: url('.concat(l,')"></div><div class="channel-intro">\n              <div class="channel-settings"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg></div>\n              <h2># ').concat(n[0].channel_name,"</h2>\n              ").concat(c,'\n            <div class="leaderboard row"></div></div>')}tippy("[data-tippy-content]"),e()})),"thread"==t&&((u=n).avatar||(u.avatar=u.original_avatar),u.avatar||(u.avatar="/img/octo-ghost.png"),u.name||(u.name=u.original_username+"<small><i> (not registered)</i></small>"),d="",m="",(h=u.followups.find((function(e){return e.id==r.id})))&&(d="has-followup",m=h.followup_id),p="",1==u.archived_thread&&(p=u.archived_text?'<div class="archived"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-archive"><polyline points="21 8 21 21 3 21 3 8"></polyline><rect x="1" y="3" width="22" height="5"></rect><line x1="10" y1="12" x2="14" y2="12"></line></svg>'.concat(u.archived_text,"</div>"):'<div class="archived"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-archive"><polyline points="21 8 21 21 3 21 3 8"></polyline><rect x="1" y="3" width="22" height="5"></rect><line x1="10" y1="12" x2="14" y2="12"></line></svg>This thread has been archived and is now read-only.</div>'),f="",1==u.public_thread&&(f="is-public"),(v='<div class="col-12 single-thread-header '.concat(f,'" thread-id="').concat(u.thread_id,'">\n          <div class="add-follow-up ').concat(d,'" data-tippy-content="Add follow-up" data-followup-id="').concat(m,'">\n              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-zap"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>\n          </div>\n          <div class="post-more" data-tippy-content="More thread options">\n              <svg xmlns="http://www.w3.org/2000/svg" class="post-more-closed" width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg>\n              <svg xmlns="http://www.w3.org/2000/svg" class="post-more-open d-none" width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>\n          </div>\n          <div class="subject">\n              <h1>').concat(u.subject,'</h1>\n          </div>\n        </div>\n        <div class="col-12 author">\n          <div class="row">\n              <div class="col-2 col-sm-1">\n                <div class="author-avatar round-btn" style="background-image: url(').concat(u.avatar,');" data-userid="').concat(u.author_id,'"></div>\n              </div>\n              <div class="col post-from"><span class="post-from-author">').concat(u.name,'</span> in <span class="channel-tag ml-1 active" data-channel="45">#').concat(u.channel_name,"</span></div>\n          </div>\n        </div>\n        ").concat(p,'\n        <div class="col thread-content">\n            ').concat(u.content,"\n        </div>"))&&(document.querySelector(".single-thread-rendered").innerHTML=v),Reactions.renderReactions(u.reactions),document.querySelector(".marked-as-followup").innerHTML="",u.followups.length>0&&(g='<div class="col-12 mb-2><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-zap"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg><b class="mb-2">Marked for followup by:</b></div>',u.followups.forEach((function(e,t){var n=e.avatar;e.avatar||(n="/img/octo-ghost.png"),g+='<div class="thread-follower"><div class="author-avatar round-btn" style="background-image: url('.concat(n,');" data-userid="').concat(e.id,'" data-tippy-content="').concat(e.name,'"></div></div>')})),document.querySelector(".marked-as-followup").innerHTML=g),y="",w="","admin"!=r.role&&"owner"!=r.role||(y='<a href="" class="change-owner-thread"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>&nbsp;<span>Change owner</span></a>',w='<a href="" class="highlight-thread"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>&nbsp;<span>Highlight</span></a>'),u.author_id==parseInt(document.querySelector("#userid").value)||"admin"==r.role||"owner"==r.role?(b='<li><a href="" id="pin-thread"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11.5" cy="8.5" r="5.5"/><path d="M11.5 14v7"/></svg><span>Pin to top</span></a></li>',u.isPinned&&(b='<li><a href="" id="pin-thread"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11.5" cy="8.5" r="5.5"/><path d="M11.5 14v7"/></svg><span>Unpin</span></a></li>'),S='<b>Thread actions</b>\n            <ul>\n              <li><a href="" id="edit-thread"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="16 3 21 8 8 21 3 21 3 16 16 3"></polygon></svg><span>Edit</span></a></li>\n              '.concat(b,"\n              <li>").concat(w,'</li>\n              <li><a href="" id="move-thread"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 17l-5-5 5-5M18 17l-5-5 5-5"/></svg><span>Move</span></a></li>\n              <li><a href="" id="make-thread-public"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path></svg><span>Visibility</span></a></li>\n              <li><a href="" id="archive-thread"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg><span>Archive</span></a></li>\n              <li>').concat(y,'</li>\n              <li><a href="" id="delete-thread"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg><span>Delete</span></a></li>\n            </ul>\n            <hr>'),document.querySelector(".thread-actions").innerHTML=S):(document.querySelector(".thread-actions").innerHTML="",document.querySelector(".post-more").classList.add("d-none")),r&&0!=r.id||document.querySelector(".add-follow-up").classList.add("d-none"),document.querySelector("oembed")&&Embeds.convertEmbeds(),document.querySelector('#thread-list [thread-id="'+u.thread_id+'"]')&&document.querySelector('#thread-list [thread-id="'+u.thread_id+'"] .unseen')&&((x=document.querySelector('#thread-list [thread-id="'+u.thread_id+'"] .unseen')).parentNode.removeChild(x),document.querySelector("#thread-list .unseen")||document.querySelector(".single-channel.active").classList.remove("unread")),tippy("[data-tippy-content]")),"followups"==t&&(k="",n.forEach((function(e,t){var n=e.avatar;n||(n=e.original_avatar),k+='<div class="row thread target-thread" thread-id="'.concat(e.thread_id,'" channel-id="').concat(e.channel_id,'" followup-id="').concat(e.followup_id,'">\n              <div class="col-2">\n                  <div class="author" style="background-image: url(').concat(n,')"></div>\n              </div>\n              <div class="col-10">\n                  <div class="row">\n                      <div class="col-12 thread-headline">\n                          <h2>').concat(e.subject,'</h2>\n                      </div>\n                      <div class="col-12">\n                          ').concat(Helper.stripHTML(e.content).substring(0,200),'...\n                      </div>\n                      <div class="col-12 thread-footer">\n                          <div class="row">\n                              <div class="col float-right text-right">\n                                <a href="#" class="unfollow float-right btn-line">\n                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-zap-off"><polyline points="12.41 6.75 13 2 10.57 4.92"></polyline><polyline points="18.57 12.91 21 10 15.66 10"></polyline><polyline points="8 8 3 14 12 14 11 22 16 16"></polyline><line x1="1" y1="1" x2="23" y2="23"></line></svg>\n                                  <span>Unfollow thread</span>\n                                </a>\n                              </div>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n          </div>')})),k&&(document.querySelector("#follow-up-feed").innerHTML=k)),"mentions"==t&&(q="",n.forEach((function(e,t){q+='<div class="row thread target-thread" mention-id="'.concat(e.mention_id,'" thread-id="').concat(e.thread_thread_id,'" channel-id="').concat(e.thread_channel_id,'">\n                            <div class="col-2">\n                                <div class="author" style="background-image: url(').concat(e.avatar,')"></div>\n                            </div>\n                            <div class="col-10">\n                                <div class="row">\n                                    <div class="col-12 thread-headline">\n                                        <h2>').concat(e.subject,'</h2>\n                                    </div>\n                                    <div class="col-12">\n                                        ').concat(Helper.stripHTML(e.content).substring(0,200),'...\n                                    </div>\n                                    <div class="col-12 thread-footer">\n                                        <div class="row">\n                                            <div class="col float-right text-right">\n                                              <a href="#" class="mark-read float-right btn-line">\n                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>\n                                                <span>Mark read</span>\n                                              </a>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>')})),q&&(document.querySelector("#mentions-feed").innerHTML=q)),"members"==t&&(T="","",document.querySelector(".member-amount").textContent=n.length,n.forEach((function(e,t){var n=e.bio;n&&n.length>100&&(n=e.bio.substring(0,100)+"..."),n||(n="<i>This person prefers to keep their bio secret.</i>"),e.avatar||(e.avatar="/img/octo-ghost.png"),T+='<div class="col-12 col-md-6 col-xl-4">\n                          <div class="thread member" data-userid="'.concat(e.id,'" data-interests="').concat(e.interests,'">\n\n                            <div class="row no-gutters">\n                                <div class="col-3">\n                                    <div class="author" style="background-image: url(').concat(e.avatar,')"></div>\n                                </div>\n                                <div class="col-9 thread-headline my-auto">\n                                    <h2>').concat(e.name,'</h2>\n                                </div>\n                            </div>\n                            <div class="row mt-4">\n                                <div class="col-12">\n                                  <div class="member-bio">\n                                      ').concat(Helper.stripHTML(n),"\n                                    </div>\n                                </div>\n                            </div>\n                          </div>\n                        </div>")})),T&&(document.querySelector("#member-list").innerHTML=T)),"conversations"==t&&(L="",n.forEach((function(e,t){var n="",r="";e.participants.forEach((function(e,t){t<2&&(n+='<div class="round-btn participant-img" style="background-image: url('.concat(e.avatar,')"></div>'),r+="".concat(e.name,", ")),2==t&&(n+='<div class="round-btn participant-img more-participants"></div>',r+="..., ")}));var a=r.trim().slice(0,-1);a.length>=50&&(a="".concat(Helper.stripHTML(a.substring(0,50)),"...")),L+='<div class="conversation" convo-id="'.concat(e.convo_id,'">\n                          <div class="row no-gutters">\n                            <div class="col-4">').concat(n,'</div>\n                            <div class="col-8 post-headline my-auto participant-names">').concat(a,"</div>\n                          </div>\n                        </div>")})),document.querySelector("#convo-count").textContent="".concat(n.length," conversations"),L&&(document.querySelector("#convo-list").innerHTML=L)),"comments"==t&&(D="",n.forEach((function(e,t){e.comment_hash||(e.comment_hash="");var n='<div class="comment-menu-btn"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></div><div class="comment-menu">';e.author_id!=document.querySelector("#userid").value&&"admin"!=r.role&&"owner"!=r.role||(n+='<div class="comment-btn edit-comment" data-commentauthor="'.concat(e.author_id,'" data-commentid="').concat(e.id,'" data-threadid="').concat(e.thread_id,'"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34"></path><polygon points="18 2 22 6 12 16 8 16 8 12 18 2"></polygon></svg>&nbsp;<span>edit</span></div>'),n+='<div class="comment-btn delete-comment" data-commentauthor="'.concat(e.author_id,'" data-commentid="').concat(e.id,'" data-threadid="').concat(e.thread_id,'"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>&nbsp;<span>delete</span></div>')),"admin"!=r.role&&"owner"!=r.role||(n+='<div class="comment-btn change-owner-comment" data-commentauthor="'.concat(e.author_id,'" data-commentid="').concat(e.id,'" data-threadid="').concat(e.thread_id,'"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>&nbsp;<span>owner</span></div>')),n+="</div>",e.author_id!=parseInt(document.querySelector("#userid").value)&&"admin"!=r.role&&"owner"!=r.role&&(n=""),e.avatar||(e.avatar=e.original_avatar),e.avatar||(e.avatar="/img/octo-ghost.png"),e.name||(e.name=e.original_username+"<small><i> (not registered)</i></small>");var a="";if(e&&e.date){var i=e.date.split(" "),s=new Date(i[0]),c=o(new Intl.DateTimeFormat("en",{year:"numeric",month:"short",day:"2-digit"}).formatToParts(s),5),l=c[0].value,u=c[2].value,d=c[4].value;a="".concat(u,". ").concat(l," ").concat(d)}D+='<div class="comment row" data-full-comment-id="'.concat(e.id,'" data-comment-hash="#').concat(e.comment_hash,'">\n                <div class="col author-col">\n                  <div class="author round-btn" style="background-image: url(').concat(e.avatar,')" data-userid="').concat(e.author_id,'"></div>\n                </div>\n\n                <div class="col-12 col-md-10 comment-col">\n                  <div class="row">\n                    <div class="col-8">\n                      <b class="d-block mb-3">').concat(e.name,'</b>\n                    </div>\n                    <div class="col-4 text-right date-col">\n                      <time>').concat(a,'</time>\n                    </div>\n\n                    <div class="col-12 col-md-10">\n                      <div class="comment-content ck-content">').concat(e.comment,"</div>\n                    </div>\n                  </div>\n                </div>\n                ").concat(n,"\n            </div>")})),document.querySelector(".comment-list").innerHTML=D||"",document.querySelector(".single-thread-additional").classList.remove("d-none"));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=s(a.a.mark((function e(t,n){var r,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=7;break}return r=document.querySelector("#teamid").value,i=document.querySelector("#userid").value,e.next=5,axios.post("/api/user/getuser",{userID:i,teamID:r});case 5:s=e.sent,n=s.data;case 7:new Promise((function(e,r){var a="";t.forEach((function(e,t){e.comment_hash||(e.comment_hash="");var r='<div class="comment-menu-btn"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></div><div class="comment-menu">';e.author_id!=document.querySelector("#userid").value&&"admin"!=n.role&&"owner"!=n.role||(r+='<div class="comment-btn edit-comment" data-commentauthor="'.concat(e.author_id,'" data-commentid="').concat(e.id,'" data-threadid="').concat(e.thread_id,'"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34"></path><polygon points="18 2 22 6 12 16 8 16 8 12 18 2"></polygon></svg>&nbsp;<span>edit</span></div>'),r+='<div class="comment-btn delete-comment" data-commentauthor="'.concat(e.author_id,'" data-commentid="').concat(e.id,'" data-threadid="').concat(e.thread_id,'"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>&nbsp;<span>delete</span></div>')),"admin"!=n.role&&"owner"!=n.role||(r+='<div class="comment-btn change-owner-comment" data-commentauthor="'.concat(e.author_id,'" data-commentid="').concat(e.id,'" data-threadid="').concat(e.thread_id,'"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>&nbsp;<span>owner</span></div>')),r+="</div>",e.author_id!=parseInt(document.querySelector("#userid").value)&&"admin"!=n.role&&"owner"!=n.role&&(r=""),e.avatar||(e.avatar=e.original_avatar),e.avatar||(e.avatar="/img/octo-ghost.png"),e.name||(e.name=e.original_username+"<small><i> (not registered)</i></small>");var i="";if(e&&e.date){var s=e.date.split(" "),c=new Date(s[0]),l=o(new Intl.DateTimeFormat("en",{year:"numeric",month:"short",day:"2-digit"}).formatToParts(c),5),u=l[0].value,d=l[2].value,m=l[4].value;i="".concat(d,". ").concat(u," ").concat(m)}a+='<div class="comment row" data-full-comment-id="'.concat(e.id,'" data-comment-hash="#').concat(e.comment_hash,'">\n              <div class="col author-col">\n                <div class="author round-btn" style="background-image: url(').concat(e.avatar,')" data-userid="').concat(e.author_id,'"></div>\n              </div>\n\n              <div class="col-12 col-md-10 comment-col">\n                <div class="row">\n                  <div class="col-8">\n                    <b class="d-block mb-3">').concat(e.name,'</b>\n                  </div>\n                  <div class="col-4 text-right date-col">\n                    <time>').concat(i,'</time>\n                  </div>\n\n                  <div class="col-12 col-md-10">\n                    <div class="comment-content ck-content">').concat(e.comment,"</div>\n                  </div>\n                </div>\n              </div>\n              ").concat(r,"\n          </div>")})),a&&(document.querySelector(".comment-list").innerHTML=document.querySelector(".comment-list").innerHTML+a),e()}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=s(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"threads"==t&&"threads"==t&&new Promise((function(e,t){var r="";n.forEach((function(e,t){if(e.content){var n="",a="",o="",i="";e.followup_id&&(n='<div class="bumper has-folloup"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-zap"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg></div>'),e.mention_content_id&&(a='<div class="bumper has-mention"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#898D93" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg></div>'),1==e.archived_thread&&(o="is-archived"),1==e.public_thread&&(i="is-public");var s="";e.participants&&e.participants.length>0&&e.participants.forEach((function(e,t){0!=e.id&&t<=4&&(t<4?e.avatar?s+='<div class="commentator round-btn" style="background-image: url(\''.concat(e.avatar,"')\"></div>"):e.original_avatar?s+='<div class="commentator round-btn" style="background-image: url(\''.concat(e.original_avatar,"')\"></div>"):s+='<div class="commentator round-btn" style="background-image: url(\'/img/octo-ghost.png\')"></div>':s+='<div class="commentator more-commentators round-btn"></div>')}));var c=e.content;r+='<a href="'.concat(e.thread_slug,'" class="thread ').concat(o," ").concat(i,'" thread-slug="').concat(e.thread_slug,'" thread-id="').concat(e.thread_id,'">\n                            <div class="row no-gutters">\n                                <div class="col-9 post-headline">').concat(e.subject,'</div>\n                                <div class="col-3 post-from text-right">').concat(Helper.calcTimePast(e.date),'</div>\n                                <div class="post-excerpt">\n                                  ').concat(Helper.stripHTML(c).substring(0,75),'...\n                                </div>\n                            </div>\n                            <div class="row mt-3">\n                                <div class="col-6 footer-col">\n                                    <div class="commentators">\n                                      ').concat(s,'\n                                    </div>\n                                </div>\n                                <div class="col-6 footer-col">\n                                  ').concat(n,"\n                                  ").concat(a,"\n                                </div>\n                            </div>\n                        </a>")}})),document.querySelector("#thread-list .load-more").parentNode.removeChild(document.querySelector("#thread-list .load-more"));r&&(document.querySelector("#thread-list").innerHTML=document.querySelector("#thread-list").innerHTML+r+'<div class="load-more"><span>Load more</span><div class="spinner"></div></div>'),document.querySelector("#thread-count").innerHTML="".concat(document.querySelectorAll("#thread-list .thread").length," threads"),e()}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{render:function(t,n,r,a){return e.apply(this,arguments)},loadMore:function(e,t){return n.apply(this,arguments)},loadMoreComments:function(e,n){return t.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.State=function(){function e(){return(e=i(a.a.mark((function e(t,n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=window.location.host.split("."),o=window.location.pathname.split("/"),r[0],o[1],o[2],i="/"+n,"team"!=t&&(i="/"+n),window.location.pathname!=i&&history.pushState({},null,i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(){var t,n,r,o,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.location.hash,n=window.location.host.split("."),r=window.location.pathname.split("/"),n[0],o=r[1],i=r[2],o&&""!=o||(o="activity",State.updateURL("activity","activity")),"activity"!=o&&"followups"!=o&&"mentions"!=o&&"messages"!=o&&"profile"!=o&&"settings"!=o){e.next=19;break}return document.querySelector(".usermenu").classList.remove("visible"),document.querySelector("body").classList.add("no-threads"),Array.from(document.querySelectorAll(".main-link")).forEach((function(e){e.classList.remove("active")})),Array.from(document.querySelectorAll(".main-link[data-id="+o+"]")).forEach((function(e){e.classList.add("active")})),State.activateSection(o),Array.from(document.querySelectorAll(".single-channel")).forEach((function(e){e.classList.remove("active")})),Array.from(document.querySelectorAll(".main-section")).forEach((function(e){e.classList.add("d-none")})),document.querySelector("."+o+"-view").classList.remove("d-none"),"profile"==o&&User.showUserProfile(),"settings"==o&&User.showUserSettings(),e.abrupt("return");case 19:if("billing"==i&&Billing.showBillingModal(),!o){e.next=41;break}if(document.querySelector("body").classList.remove("no-threads"),"dashboard"!=o||i){e.next=26;break}return State.updateURL("overview","dashboard/overview"),Dashboard.showActivity(),e.abrupt("return");case 26:if("dashboard"==o&&"overview"==i&&Dashboard.showActivity(),"members"!=o){e.next=40;break}if(!i){e.next=31;break}return Members.showProfile(null,i,!0),e.abrupt("return");case 31:return document.querySelector(".usermenu").classList.remove("visible"),document.querySelector("body").classList.add("no-threads"),Array.from(document.querySelectorAll(".main-link")).forEach((function(e){e.classList.remove("active")})),Array.from(document.querySelectorAll(".main-link[data-id="+o+"]")).forEach((function(e){e.classList.add("active")})),State.activateSection(o),Array.from(document.querySelectorAll(".single-channel")).forEach((function(e){e.classList.remove("active")})),Array.from(document.querySelectorAll(".main-section")).forEach((function(e){e.classList.add("d-none")})),document.querySelector("."+o+"-view").classList.remove("d-none"),e.abrupt("return");case 40:document.querySelector(".single-channel")&&(s=document.querySelector('.single-channel[data-slug="'+o+'"]').getAttribute("data-channel"),c=!1,i||(c=!0),Channels.changeChannel(s,0,!0,c).then((function(){Array.from(document.querySelectorAll(".main-section")).forEach((function(e){e.classList.add("d-none")})),document.querySelector(".channel-view").classList.remove("d-none"),i&&Threads.changeThread(i,!0,t,!0)})));case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=i(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("followups"!=t){e.next=3;break}return Followups.getFollowups(),e.abrupt("return");case 3:if("mentions"!=t){e.next=6;break}return Mentions.getMentions(),e.abrupt("return");case 6:if("messages"!=t){e.next=9;break}return Messages.getMessages(),e.abrupt("return");case 9:if("members"!=t){e.next=12;break}return Members.getMembers(),e.abrupt("return");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{updateURL:function(t,n){return e.apply(this,arguments)},loadFromURL:function(){return t.apply(this,arguments)},activateSection:function(e){return n.apply(this,arguments)}}}()},function(e,t){window.Helper={calcTimePast:function(e){var t,n,r,a=new Date,o=this.stringToDate(e),i=Math.abs(o-a),s=(t=o,r=12*((n=a).getFullYear()-t.getFullYear()),r-=t.getMonth(),(r+=n.getMonth())<=0?0:r),c=Math.ceil(i/864e5),l=Math.abs(o-a)/36e5,u=Math.round(i%864e5%36e5/6e4);return parseInt(u.toFixed(0))<=1?"moments ago":parseInt(l.toFixed(0))<=1?u.toFixed(0)+"m ago":parseInt(l.toFixed(0))<24?l.toFixed(0)+"h ago":parseInt(l.toFixed(0))>=24&&parseInt(c.toFixed(0))<=31?c+" days ago":parseInt(s.toFixed(0))>1?s+" months ago":parseInt(l.toFixed(0))>=48?e.split(" ")[0].replace(/-/g,"/"):void 0},stringToDate:function(e){if(e){var t=e.split(" ")[0].split("-"),n=e.split(" ")[1].split(":"),r=new Date(t[0],--t[1],t[2]);return r.setHours(n[0],n[1],n[2]),r}},stripHTML:function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""},renderContent:function(e){var t="";if(e)return e.blocks.forEach((function(e){switch(e.type){case"header":t+="<h".concat(e.data.level,">").concat(e.data.text,"</h").concat(e.data.level,">");break;case"paragraph":t+="<p>".concat(e.data.text,"</p>");break;case"delimiter":t+='<div class="block-delimiter"></div>';break;case"image":e.data.withBackground?t+='<img class="img-responsive" style="max-width: 400px; margin: 25px auto; display: block;" src="'.concat(e.data.file.url,'" title="').concat(e.data.caption,'" /><br /><em>').concat(e.data.caption,"</em>"):t+='<img class="img-fluid" src="'.concat(e.data.file.url,'" title="').concat(e.data.caption,'" /><br /><em>').concat(e.data.caption,"</em>");break;case"list":t+="<ul>",e.data.items.forEach((function(e){t+="<li>".concat(e,"</li>")})),t+="</ul>";break;case"checklist":t+='<div class="cdx-block cdx-checklist">',e.data.items.forEach((function(e){e.checked?t+='<div class="cdx-checklist__item cdx-checklist__item--checked">\n                          <span class="cdx-checklist__item-checkbox"></span>\n                          <div class="cdx-checklist__item-text" contenteditable="true">'.concat(e.text,"</div>\n                        </div>"):t+='<div class="cdx-checklist__item">\n                          <span class="cdx-checklist__item-checkbox"></span>\n                          <div class="cdx-checklist__item-text" contenteditable="true">'.concat(e.text,"</div>\n                        </div>")})),t+="</div>";break;case"attaches":t+='<div class="cdx-attaches cdx-attaches--with-file">\n                    <div class="cdx-attaches__file-icon" data-extension="'.concat(e.data.file.extension,'" style="color: rgb(246, 118, 166);">\n                      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="40"><path d="M17 0l15 14V3v34a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3h20-6zm0 2H3a1 1 0 0 0-1 1v34a1 1 0 0 0 1 1h26a1 1 0 0 0 1-1V14H17V2zm2 10h7.926L19 4.602V12z"></path></svg>\n                    </div>\n                    <div class="cdx-attaches__file-info"><div class="cdx-attaches__title">').concat(e.data.file.name,'</div></div>\n                    <a class="cdx-attaches__download-button" href="').concat(e.data.file.url,'" target="_blank" rel="nofollow noindex noreferrer">\n                      <svg xmlns="http://www.w3.org/2000/svg" width="17pt" height="17pt" viewBox="0 0 17 17"><path d="M9.457 8.945V2.848A.959.959 0 0 0 8.5 1.89a.959.959 0 0 0-.957.957v6.097L4.488 5.891a.952.952 0 0 0-1.351 0 .952.952 0 0 0 0 1.351l4.687 4.688a.955.955 0 0 0 1.352 0l4.687-4.688a.952.952 0 0 0 0-1.351.952.952 0 0 0-1.351 0zM3.59 14.937h9.82a.953.953 0 0 0 .953-.957.952.952 0 0 0-.953-.953H3.59a.952.952 0 0 0-.953.953c0 .532.425.957.953.957zm0 0" fill-rule="evenodd"></path></svg>\n                    </a>\n                  </div>')}})),t},getTimestamp:function(e){return new Date(Date.parse(e)).getTime()/1e3}}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Reactions=function(){function e(){return(e=i(a.a.mark((function e(t){var n,r,o,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=document.querySelector("#teamid").value,r=document.querySelector("#userid").value,o=document.querySelector(".thread.active").getAttribute("thread-id"),(i=document.querySelector(".thread-reactions-data").value)?(i&&(i=JSON.parse(i)),"string"==typeof(s=i)&&(s=JSON.parse(i)),-1!=(c=s.map((function(e){return e.emoji})).indexOf(t))?s[c].users.push(r):s.push({emoji:t,users:[r]}),i=s):i=[{emoji:t,users:[r]}],axios.post("/api/thread/react",{teamID:n,threadID:o,reactions:JSON.stringify(i)}).then((function(e){e&&200==e.status&&Reactions.renderReactions(JSON.stringify(i))})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(t){var n,r,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=document.querySelector("#teamid").value,r=document.querySelector("#userid").value,o=document.querySelector(".thread.active").getAttribute("thread-id"),(i=document.querySelector(".thread-reactions-data").value)&&(i=JSON.parse(i)),s=i.map((function(e){return e.emoji})).indexOf(t),i[s].users=i[s].users.filter((function(e){return e!==r})),axios.post("/api/thread/react",{teamID:n,threadID:o,reactions:JSON.stringify(i)}).then((function(e){e&&200==e.status&&(document.querySelector(".thread-reactions-data").value=JSON.stringify(i),Reactions.renderReactions(JSON.stringify(i)))})).catch((function(e){console.log(e)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=i(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!document.querySelector(".thread-reactions")){e.next=16;break}if(document.querySelector(".thread-reactions").innerHTML="",t){e.next=4;break}return e.abrupt("return");case 4:return t=JSON.parse(t),n=document.querySelector("#userid").value,r=document.querySelector("#teamid").value,e.next=9,axios.post("/api/members/get",{userID:n,teamID:r});case 9:o=e.sent,localStorage.members=JSON.stringify(o.data),i="",t.forEach((function(e,t){if(e.users.length>0){var r="";e.users.forEach((function(e,t){var a=o.data.find((function(t){return t.id==e}));a.id==n?r+="You, ":r+=a.name+", "})),r=r.substring(0,r.length-2),-1!=e.users.indexOf(n)?i+='<div class="reaction already-reacted" data-tippy-content="'.concat(r,'"><div class="emoji">').concat(e.emoji,'</div><div class="count">').concat(e.users.length,"</div></div>"):i+='<div class="reaction" data-tippy-content="'.concat(r,'"><div class="emoji">').concat(e.emoji,'</div><div class="count">').concat(e.users.length,"</div></div>")}})),document.querySelector(".thread-reactions").innerHTML=i,document.querySelector(".thread-reactions-data").value=JSON.stringify(t),tippy("[data-tippy-content]");case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{addReaction:function(t){return e.apply(this,arguments)},removeReaction:function(e){return t.apply(this,arguments)},renderReactions:function(e){return n.apply(this,arguments)}}}()},function(e,t){function n(){document.querySelector(".activity-view .feed-row").scrollTop>=100&&document.querySelector(".frontpage-message").classList.add("faded-out")}document.addEventListener("DOMContentLoaded",(function(){State.loadFromURL(),tippy("[data-tippy-content]"),window.onpopstate=function(e){State.loadFromURL()},axios.defaults.params={},axios.interceptors.request.use((function(e){return e.data||(e.data={}),e.data.userID||(e.data.userID=document.querySelector("#userid").value),e.data.usertoken||(e.data.usertoken=document.querySelector("#usertoken").value),e}),(function(e){return Promise.reject(e)})),axios.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&Notification.showToast("Not allowed."),e}));var e,t,r,a=new EmojiButton;if(a.on("emoji",(function(e){e&&""!=e&&Reactions.addReaction(e)})),document.querySelector(".activity-view .feed-row")&&document.querySelector(".frontpage-message")&&document.querySelector(".activity-view .feed-row").addEventListener("scroll",(e=n,t=250,r=Date.now(),function(){r+t-Date.now()<0&&(e(),r=Date.now())})),document.addEventListener("click",(function(e){document.querySelector(".suggestions.visible")&&(document.querySelector(".search-col").contains(e.target)||Search.closeSearch());e.target.matches(".main-link")&&(e.preventDefault(),e.stopPropagation(),document.querySelector("body").classList.remove("showing-single-thread"),document.querySelector(".usermenu").classList.remove("visible"),document.querySelector("body").classList.add("no-threads"),Array.from(document.querySelectorAll(".main-link")).forEach((function(e){e.classList.remove("active")})),e.target.classList.add("active"),Array.from(document.querySelectorAll(".single-channel")).forEach((function(e){e.classList.remove("active")})),Array.from(document.querySelectorAll(".main-section")).forEach((function(e){e.classList.add("d-none")})),document.querySelector("."+e.target.getAttribute("data-id")+"-view").classList.remove("d-none"),"activity"==e.target.getAttribute("data-id")&&State.updateURL("activity","activity"),"settings"==e.target.getAttribute("data-id")&&State.updateURL("settings","settings"),"overview"==e.target.getAttribute("data-id")&&(Dashboard.showActivity(),State.updateURL("overview","dashboard/overview")),"team-settings"==e.target.getAttribute("data-id")&&State.updateURL("team-settings","dashboard/team-settings"),"customize"==e.target.getAttribute("data-id")&&State.updateURL("customize","dashboard/customize"),"integrations"==e.target.getAttribute("data-id")&&State.updateURL("integrations","dashboard/integrations"),"billing"==e.target.getAttribute("data-id")&&State.updateURL("billing","dashboard/billing"),"community"==e.target.getAttribute("data-id")&&State.updateURL("community","dashboard/community"),"invites"==e.target.getAttribute("data-id")&&State.updateURL("invites","dashboard/invites"),"import"==e.target.getAttribute("data-id")&&State.updateURL("import","dashboard/import"),document.querySelector("#post-menu")&&document.querySelector("#post-menu").classList.remove("visible"),document.querySelector(".post-action-menu")&&document.querySelector(".post-action-menu").classList.remove("visible"),document.querySelector(".single-thread-row")&&document.querySelector(".single-thread-row").classList.remove("pushed"));if("followups"==e.target.getAttribute("data-id")&&Followups.getFollowups(),"mentions"==e.target.getAttribute("data-id")&&Mentions.getMentions(),"members"==e.target.getAttribute("data-id")&&Members.getMembers(),"messages"==e.target.getAttribute("data-id")&&Messages.getMessages(),e.target.matches(".chat-options")&&Messages.showMessageOptions(),e.target.matches(".unfollow")){var t=e.target.closest(".target-thread").getAttribute("followup-id");Followups.removeFollowup(t)}if(e.target.matches(".mark-read")){var n=e.target.closest(".target-thread").getAttribute("mention-id");Mentions.markRead(n)}if(e.target.matches("#add-to-conversation")&&(e.preventDefault(),e.stopPropagation(),Messages.addToConversation()),e.target.matches(".remove-from-convo")){e.preventDefault(),e.stopPropagation();var r=e.target.parentNode.parentNode.getAttribute("data-user-id");Messages.removeFromConversation(r)}if(e.target.matches("#convo-list .conversation")){Array.from(document.querySelectorAll("#convo-list .conversation")).forEach((function(e){e.classList.remove("active")}));var o=e.target.getAttribute("convo-id");e.target.classList.add("active"),Messages.render(o)}if(e.target.matches("#create-thread")&&(document.querySelector("body").classList.contains("updating-thread")?Threads.updateThread():Threads.saveThread()),e.target.matches("#discard-thread")&&State.loadFromURL(),e.target.matches(".post-more")&&(document.querySelector(".post-more-open").classList.toggle("d-none"),document.querySelector(".post-more-closed").classList.toggle("d-none"),document.querySelector("#post-menu").classList.toggle("visible"),document.querySelector(".single-thread-row").classList.toggle("pushed")),e.target.matches("#edit-thread")&&(e.preventDefault(),e.stopPropagation(),Threads.edit()),e.target.matches("#pin-thread")&&(e.preventDefault(),Threads.togglePin()),e.target.matches("#archive-thread")&&(e.preventDefault(),Overlay.show(".archive-thread-dialog")),e.target.matches("#archive-this-thread")&&(e.preventDefault(),Threads.archive()),(e.target.matches(".discard-overlay")||e.target.matches(".overlay-content .close"))&&(e.preventDefault(),Overlay.close()),e.target.matches("#make-thread-public")){e.preventDefault();var i=document.querySelector(".single-thread-header").getAttribute("thread-id"),s=document.querySelector("#userid").value,c=(document.querySelector("#teamid").value,document.querySelector("#teamdomain").value);axios.post("/api/thread/change",{threadID:i,userID:s}).then((function(e){document.querySelector(".visible-thread-slug").textContent="https://".concat(c,"/public/").concat(e.data.thread_slug);var t=0;document.querySelector("#thread-list .thread.active").classList.contains("is-public")&&(t=1),t?(document.querySelector("#confirm-make-thread-public").classList.remove("btn-green"),document.querySelector("#confirm-make-thread-public").classList.add("btn-red"),document.querySelector("#confirm-make-thread-public").textContent="Make thread private"):(document.querySelector("#confirm-make-thread-public").classList.remove("btn-red"),document.querySelector("#confirm-make-thread-public").classList.add("btn-green"),document.querySelector("#confirm-make-thread-public").textContent="Make thread public"),Overlay.show(".make-thread-public-dialog")}))}if(e.target.matches("#confirm-make-thread-public")&&(e.preventDefault(),Threads.togglePublic()),e.target.matches("#move-thread")){e.preventDefault();var l="";Array.from(document.querySelectorAll(".single-channel")).forEach((function(e){l+='<option value="'.concat(e.getAttribute("data-channel"),'">').concat(e.textContent,"</option>")})),document.querySelector("#move-thread-to-channel").innerHTML=l,document.querySelector(".post-action-menu").classList.toggle("visible")}if(e.target.matches("#save-move-thread")&&(e.preventDefault(),Threads.move()),e.target.matches("#delete-thread")&&(e.preventDefault(),Overlay.show(".yes-no-dialog")),e.target.matches("#confirm-delete-thread")&&(e.preventDefault(),Threads.remove()),(e.target.matches("#new-post")||e.target.matches(".new-post"))&&(e.preventDefault(),e.stopPropagation(),document.querySelector("body").classList.add("no-threads"),Array.from(document.querySelectorAll(".main-section")).forEach((function(e){e.classList.add("d-none")})),document.querySelector(".new-thread").classList.remove("d-none"),Threads.openEditor()),e.target.matches(".target-thread")){e.preventDefault(),e.stopPropagation();var u=e.target.getAttribute("channel-id"),d=e.target.getAttribute("thread-id");Threads.jumpToThread(u,d)}if(e.target.matches(".jumpto-thread")){e.preventDefault(),e.stopPropagation();var m=e.target.getAttribute("channel-id"),h=e.target.getAttribute("thread-id");Threads.jumpToThread(m,h)}(e.target.matches("#add-channel, .add-channel")&&(document.querySelector("#new-channel-title").value="",Overlay.show(".add-channel-dialog")),e.target.matches("#create-channel")&&Channels.create(),e.target.matches(".single-channel"))&&(e.preventDefault(),e.stopPropagation(),document.querySelector("body").classList.remove("no-threads"),document.querySelector(".mobile-channels").classList.remove("open"),document.querySelector(".mobile-channels h2").textContent=e.target.textContent,Array.from(document.querySelectorAll(".main-section")).forEach((function(e){e.classList.add("d-none")})),document.querySelector("#thread-list").innerHTML="",document.querySelector(".channel-view").classList.remove("d-none"),Channels.changeChannel(e.target.getAttribute("data-channel"),null,!1,!0));if(e.target.matches("#thread-list .thread")){e.preventDefault(),e.stopPropagation(),document.querySelector("body").classList.remove("no-threads"),document.querySelector(".single-thread-rendered").innerHTML="";var p=e.target.getAttribute("thread-id");"null"==p&&(p=e.target.getAttribute("thread-slug")),Threads.changeThread(p)}if(e.target.matches(".add-reaction")&&(a.pickerVisible?a.hidePicker():a.showPicker(e.target)),e.target.matches(".reaction")&&(e.preventDefault(),e.stopPropagation(),e.target.classList.contains("add-reaction")||e.target.classList.contains("already-reacted")||Reactions.addReaction(e.target.querySelector(".emoji").textContent),e.target.classList.contains("already-reacted")&&Reactions.removeReaction(e.target.querySelector(".emoji").textContent)),e.target.matches("#add-comment")&&Comments.postComment(),e.target.matches(".edit-comment")){e.preventDefault(),e.stopPropagation();var f=e.target.getAttribute("data-commentid");e.target.getAttribute("data-commentauthor"),e.target.getAttribute("thread-id");axios.post("/api/thread/getcomment",{commentID:f}).then((function(t){document.querySelector("#edit-comment").classList.remove("d-none"),document.querySelector("#add-comment").classList.add("d-none"),e.target.parentNode.parentNode.classList.add("editing-comment"),window.commenteditor.setData(t.data.comment),document.querySelector(".ck-editor__editable").focus();var n=document.querySelector(".ck-editor__editable").clientHeight,r=document.querySelector(".single-thread-row").scrollHeight;document.querySelector(".single-thread-row").scrollTop=r-n-250}))}if(e.target.matches(".delete-comment")){e.preventDefault(),e.stopPropagation();var v=e.target.getAttribute("data-commentid");Comments.removeComment(v)}if(e.target.matches("#edit-comment")){e.preventDefault(),e.stopPropagation();var g=document.querySelector(".editing-comment .edit-comment").getAttribute("data-commentid"),y=document.querySelector(".editing-comment .edit-comment").getAttribute("data-commentauthor"),w=document.querySelector(".editing-comment .edit-comment").getAttribute("thread-id");Comments.editComment(y,w,g)}if(e.target.matches(".add-follow-up"))if(e.preventDefault(),e.stopPropagation(),e.target.classList.contains("has-followup")){var b=e.target.getAttribute("data-followup-id");Followups.removeFollowup(b)}else{var S=document.querySelector(".single-thread-header").getAttribute("thread-id");Followups.addFollowup(S)}if(e.target.matches("#start-new-convo")&&(e.preventDefault(),Messages.showNewConvoDialog()),e.target.matches("#start-conversation")&&(e.preventDefault(),Messages.createConversation()),e.target.matches(".channel-settings")){var x=document.querySelector("[data-channel].active").getAttribute("data-channel");Channels.editChannel(x),Overlay.show(".channel-settings-dialog")}if(e.target.matches("#save-team-settings")&&(e.preventDefault(),Settings.updateTeamSettings()),e.target.matches("#update-channel")&&Channels.update(),e.target.matches("#add-to-channel")&&Channels.addMember(),e.target.matches("#delete-channel")&&Channels.remove(),e.target.matches(".remove-from-channel")){var k=e.target.parentNode.parentNode.getAttribute("data-user-id");Channels.removeMember(k)}if(e.target.matches("#avatar")&&document.querySelector(".usermenu").classList.toggle("visible"),e.target.matches("#invite-people")&&(e.preventDefault(),Overlay.show(".invite-people-dialog")),e.target.matches("#copy-link")){var q=document.getElementById("invite-link");q.select(),q.setSelectionRange(0,99999),document.execCommand("copy"),Notification.showToast("Invite-code copied to clipboard!")}if(e.target.matches("#reset-share-link")&&Team.resetShareLink(),e.target.matches("#savesettings")&&(e.preventDefault(),Settings.updateSettings()),e.target.matches("#billing")&&(e.preventDefault(),Billing.showBillingModal()),e.target.matches(".agree-change-plan-btn")&&(e.preventDefault(),Billing.updatePlan()),(e.target.matches("[data-userid]")||e.target.matches("[data-user-id]"))&&(e.preventDefault(),e.target.matches("[data-user-id]")?Members.showProfile(e.target.getAttribute("data-user-id"),null):Members.showProfile(e.target.getAttribute("data-userid"),null)),e.target.matches("a.mention")&&-1!=e.target.getAttribute("href").indexOf("/u/")&&(e.preventDefault(),Members.showProfileByName(e.target.textContent.substring(1))),e.target.matches("#profile")&&User.showUserProfile(),e.target.matches("#user-settings")&&User.showUserSettings(),e.target.matches(".save-user-settings")&&Settings.updateUserSettings(),e.target.matches(".edit-member")&&Team.fillMemberInfo(e.target.getAttribute("data-memberid")),e.target.matches("#remove-member")&&(e.preventDefault(),Members.removeMember()),e.target.matches("#update-member")&&(e.preventDefault(),Members.updateMember()),e.target.matches(".load-more")){var T=document.querySelector(".single-channel.active").getAttribute("data-channel");Channels.loadMore(T)}if(e.target.matches(".suggestion-hit a")&&(e.preventDefault(),"thread"==e.target.getAttribute("hit-type")&&Threads.jumpToThread(e.target.getAttribute("channel-id"),e.target.getAttribute("thread-id")),Search.closeSearch()),e.target.matches(".mobile-channels h2")&&document.querySelector(".mobile-channels").classList.toggle("open"),e.target.matches("#upload-user-csv")&&(e.preventDefault(),Importer.importUsers()),e.target.matches("#upload-content-discord")&&(e.preventDefault(),Importer.importContent()),e.target.matches(".remove-whitelisted-user")){e.preventDefault();var L=e.target.parentNode.textContent;Importer.removeManually(L)}if(e.target.matches("#remove-slack-integration")&&(e.preventDefault(),Integrations.removeIntegration("slack")),e.target.matches("#configure-slack")&&(e.preventDefault(),Integrations.showSlackConfig()),e.target.matches("#confirm-slack-config")&&(e.preventDefault(),Integrations.updateSlackIntegration()),e.target.matches("#add-user-manually")){e.preventDefault();var D=document.querySelector(".add-user-manually").value;Importer.addUserManually(D)}if(e.target.matches(".add-widget")){var M=e.target.getAttribute("data-widget-id");Widgets.showWidgetDialog(M)}if(e.target.matches(".save-widget")){var O=e.target.getAttribute("data-widget-id");Widgets.saveWidget(O)}if(e.target.matches("#update-front-announcement")&&Widgets.saveWidget(0),e.target.matches(".remove-widget")){var A=e.target.getAttribute("data-widget-name");Widgets.removeWidget(A)}if(e.target.matches("#add-custom-field")&&(e.preventDefault(),Overlay.show(".add-field-dialog")),e.target.matches(".save-custom-field")&&Settings.addCustomField(),e.target.matches(".remove-field")&&Settings.removeCustomField(e.target.getAttribute("data-field")),e.target.matches(".nav-link")){e.preventDefault();var I=e.target.getAttribute("href");Array.from(document.querySelectorAll(".nav-link")).forEach((function(e){e.classList.remove("active")})),e.target.classList.add("active"),Array.from(document.querySelectorAll(".tab-pane")).forEach((function(e){e.classList.remove("show","active")})),document.querySelector(I).classList.add("show","active")}if(e.target.matches(".comment-col time")){e.preventDefault(),e.stopPropagation();var E=e.target.parentNode.parentNode.parentNode.parentNode.getAttribute("data-comment-hash");window.location.hash=E}if(e.target.matches("#hide-help-widget")&&(document.cookie="hidehelp=true",document.querySelector(".widgets-col").removeChild(document.querySelector(".widget.first-steps")),document.querySelector(".widgets-col").removeChild(document.querySelector(".hide-help-line"))),e.target.matches(".btn-group-toggle a")){e.preventDefault(),e.stopPropagation();var j=e.target.parentNode;Array.from(j.querySelectorAll("a")).forEach((function(e){e.classList.remove("btn-green"),e.classList.add("btn-empty")})),e.target.classList.remove("btn-empty"),e.target.classList.add("btn-green")}if(e.target.matches(".schedule-once")&&(document.querySelector(".schduler-recurring").classList.add("d-none"),document.querySelector(".schduler-once").classList.remove("d-none")),e.target.matches(".schedule-recurring")&&(document.querySelector(".schduler-once").classList.add("d-none"),document.querySelector(".schduler-recurring").classList.remove("d-none")),e.target.matches("#toggle-scheduler")&&(e.preventDefault(),e.stopPropagation(),document.querySelector(".scheduler").classList.toggle("d-none"),document.querySelector(".scheduler.d-none")?document.querySelector("#toggle-scheduler span").textContent="Schedule this thread":document.querySelector("#toggle-scheduler span").textContent="Close Scheduler"),e.target.matches("#reset-api-key")&&Settings.resetAPIKey(),e.target.matches("#integrate-telegram")&&(e.preventDefault(),Integrations.showTelegramDialog()),e.target.matches("#confirm-telegram-config")&&(e.preventDefault(),Integrations.updateTelegramIntegration()),e.target.matches("#remove-telegram-integration")&&(e.preventDefault(),Integrations.removeIntegration("telegram")),e.target.matches("#integrate-zapier")&&(e.preventDefault(),Overlay.show(".zapier-info-dialog")),e.target.matches("#dash-mobile-more")&&(e.preventDefault(),document.querySelector(".dashboard-mobile-menu").classList.toggle("visible")),e.target.matches(".dashboard-mobile-menu ul li a")&&document.querySelector(".dashboard-mobile-menu").classList.toggle("visible"),e.target.matches(".highlight-thread")){e.preventDefault();var C=document.querySelector(".single-thread-header").getAttribute("thread-id");Threads.highlightThread(C)}if(e.target.matches(".remove-highlight u")){e.preventDefault();var _=document.querySelector(".activity-list .highlighted-thread").getAttribute("thread-id");Threads.removeHighlight(_)}if(e.target.matches(".change-owner-thread")){e.preventDefault();var N=document.querySelector(".single-thread-header").getAttribute("thread-id");document.querySelector(".change-owner-dialog").setAttribute("content-type","thread"),document.querySelector(".change-owner-dialog").setAttribute("content-id",N),Overlay.show(".change-owner-dialog"),Threads.showChangeOwnerDialog()}if(e.target.matches(".change-owner-comment")&&(document.querySelector(".change-owner-dialog").setAttribute("content-type","comment"),document.querySelector(".change-owner-dialog").setAttribute("content-id",e.target.getAttribute("data-commentid")),Overlay.show(".change-owner-dialog"),Threads.showChangeOwnerDialog()),e.target.matches("#change-owner")&&(e.preventDefault(),Threads.changeOwner()),e.target.matches(".user-interests .tag")){var H=e.target.textContent;document.querySelector("#user-profile").classList.add("d-none"),document.querySelector(".members-view").classList.remove("d-none"),document.querySelector("#interest-filter").value=H,Members.filterMembers(H)}if(e.target.matches(".comment-menu-btn")&&e.target.parentNode.querySelector(".comment-menu").classList.toggle("show"),e.target.matches(".btn-change-plan")){var P="",R=e.target.getAttribute("data-plan");P=document.querySelector("#billing-cycle").checked?"annually":"monthly",Billing.changePlan(R,P)}if(e.target.matches(".channel-mark-read")){var B=document.querySelector(".open-context-menu").getAttribute("data-channel");Channels.markChannelRead(B)}if(e.target.matches("#jump-to-last-comment")){var U=document.querySelector(".single-thread-header").getAttribute("thread-id");Comments.loadAllComments(U,(function(){var e=document.querySelector(".single-thread-row").scrollHeight,t=0;document.querySelector(".last-comment")&&(t=document.querySelector(".last-comment").clientHeight),document.querySelector(".single-thread-row").scrollTop=e-t}))}}),!0),document.querySelector("#search")&&document.querySelector("#search").addEventListener("keydown",(function(e){var t=document.querySelector("#search").value;t.length>2&&Search.find(t),e.which})),document.querySelector("#chat-input")&&document.querySelector("#chat-input").addEventListener("keydown",(function(e){13==e.which&&Messages.sendMessage(document.querySelector("#chat-input").value)})),document.querySelector(".check-team-name")&&document.querySelector(".check-team-name").addEventListener("keyup",(function(e){Team.checkteamName(e.target.value)})),document.querySelector("#interest-filter")){var o=null;document.querySelector("#interest-filter").addEventListener("keyup",(function(e){document.querySelector(".loading-member-filter").classList.remove("d-none");var t=e.target.value;t.length>=2&&(clearTimeout(o),o=setTimeout((function(){Members.filterMembers(t)}),500)),0==e.target.value.length&&(clearTimeout(o),Members.getMembers(),document.querySelector(".loading-member-filter").classList.add("d-none"))}))}document.querySelector("#editing-channel-privacy").addEventListener("change",(function(e){1==e.target.value?document.querySelector(".add-remove-members-section").classList.add("d-none"):document.querySelector(".add-remove-members-section").classList.remove("d-none")})),document.querySelector("#userImage").addEventListener("change",(function(e,t){document.querySelector(".profile-view .author-avatar").style.backgroundImage="url(".concat(window.URL.createObjectURL(this.files[0]),")"),document.querySelector(".profile-view .hint").textContent="hit update to save"})),document.querySelector("#channelImage").addEventListener("change",(function(e,t){document.querySelector(".channel-settings-dialog .channel-image").style.backgroundImage="url(".concat(window.URL.createObjectURL(this.files[0]),")"),document.querySelector(".channel-settings-dialog .channel-img-update-info").textContent="hit save to update"})),document.querySelector("#billing-cycle")&&document.querySelector("#billing-cycle").addEventListener("change",(function(e){var t;t=this.checked?"annually":"monthly",Billing.changeBillingCycle(t)}))})),Array.prototype.unique=function(){return this.filter((function(e,t,n){return n.indexOf(e)===t}))}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Team=function(){function e(){return(e=i(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#teamid").value,n=document.querySelector("#userid").value,r=document.querySelector("#usertoken").value,e.next=5,axios.post(Config.api+"/api/team/revokelink",{userID:n,usertoken:r,teamID:t});case 5:(o=e.sent)&&200==o.status&&(i=o.data.joincode,document.querySelector("#invite-link").value="https://playgroup.community/join/"+i,Notification.showToast("Invite link reset successfully."));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/team/checkname",{teamName:t});case 2:(n=e.sent)&&200==n.status&&(1==n.data.exists?document.querySelector("#team-settings-form .team-exists").classList.remove("d-none"):document.querySelector("#team-settings-form .team-exists").classList.add("d-none"),Overlay.close());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.querySelector("#teamid").value,e.next=3,axios.post("/api/user/getuser",{userID:t,teamID:n});case 3:r=(r=e.sent).data,document.querySelector(".edit-member-dialog").setAttribute("data-member-id",t),document.querySelector(".edit-member-dialog .user-avatar").style.backgroundImage='url("'.concat(r.avatar,'")'),document.querySelector(".edit-member-dialog .member-name").innerHTML="<b>"+r.name+"</b>",document.querySelector(".edit-member-dialog .member-joined").textContent=r.created_at,document.querySelector(".edit-member-dialog #change-role").value=r.role,Overlay.show(".edit-member-dialog");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{resetShareLink:function(){return e.apply(this,arguments)},checkteamName:function(e){return t.apply(this,arguments)},fillMemberInfo:function(e){return n.apply(this,arguments)}}}()},function(e,t){window.Notification={showToast:function(e){document.querySelector("#toast .toast-content").innerHTML=e,document.querySelector("#toast").classList.add("show"),setTimeout((function(){document.querySelector("#toast").classList.remove("show")}),3e3)},showLongToast:function(e){document.querySelector("#toast .toast-content").innerHTML=e,document.querySelector("#toast").classList.add("show"),setTimeout((function(){document.querySelector("#toast").classList.remove("show")}),1e4)}}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Overlay=function(){function e(){return(e=i(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Array.from(document.querySelectorAll(".dialog")).forEach((function(e){e.classList.add("d-none")})),document.querySelector(t)&&document.querySelector(t).classList.remove("d-none"),document.querySelector(".usermenu").classList.remove("visible"),document.querySelector(".overlay").classList.add("visible"),document.body.addEventListener("keydown",(function(e){27==e.which&&Overlay.close()}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Array.from(document.querySelectorAll(".dialog")).forEach((function(e){e.classList.add("d-none")})),document.querySelector(".overlay").classList.remove("visible"),document.querySelector("#post-menu").classList.remove("visible"),document.querySelector(".single-thread-row")&&document.querySelector(".single-thread-row").classList.remove("pushed"),document.querySelector(".post-more-open")&&document.querySelector(".post-more-open").classList.add("d-none"),document.querySelector(".post-more-closed")&&document.querySelector(".post-more-closed").classList.remove("d-none"),document.body.removeEventListener("keydown",(function(){}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{show:function(t){return e.apply(this,arguments)},close:function(e){return t.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Billing=function(){function e(){return(e=i(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Overlay.close(),t=document.querySelector("#teamid").value,n=document.querySelector("#userid").value,e.next=5,axios.post("/api/team/get",{userID:n,teamID:t});case 5:r=e.sent,r.data.team_status;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(t,n,r,o){var i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=document.querySelector("#teamid").value,document.querySelector("."+t).classList.remove("d-none"),document.querySelector("#billing-overlay-plan").textContent=n,document.querySelector("#billing-overlay-cycle").textContent=r,"free"==n&&(document.querySelector("#billing-overlay-cycle").textContent="never"),e.next=7,axios.post("/api/settings/existingplan");case 7:(s=e.sent)&&200==s.status&&(s.data.paddle_id?(c=s.data.subscription_id,document.querySelector(".agree-change-plan-btn").setAttribute("planid",o),document.querySelector(".agree-change-plan-btn").setAttribute("subscriptionid",c),document.querySelector(".agree-change-plan-btn").setAttribute("plan",n),document.querySelector(".agree-change-plan-btn").classList.remove("d-none")):Paddle.Checkout.open({method:"inline",product:o,disableLogout:!0,frameTarget:t,frameInitialHeight:366,frameStyle:"width:450px; background-color: transparent; border: none;",passthrough:"teamid:".concat(i)})),Overlay.show(".billing-chane-plan-dialog");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=i(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"annually"==t&&(document.querySelector(".starter-plan .price").innerHTML="$190<span> /yr</span>",document.querySelector(".professional-plan .price").innerHTML="$490<span> /yr</span>",document.querySelector(".business-plan .price").innerHTML="$1990<span> /yr</span>"),"monthly"==t&&(document.querySelector(".starter-plan .price").innerHTML="$19<span> /mo</span>",document.querySelector(".professional-plan .price").innerHTML="$49<span> /mo</span>",document.querySelector(".business-plan .price").innerHTML="$199<span> /mo</span>");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=i(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#teamid").value,n=document.querySelector(".agree-change-plan-btn").getAttribute("planid"),r=document.querySelector(".agree-change-plan-btn").getAttribute("plan"),o=document.querySelector(".agree-change-plan-btn").getAttribute("subscriptionid"),e.next=6,axios.post("/api/settings/changeplan",{planID:n,teamID:t,subscriptionID:o});case 6:(i=e.sent)&&200==i.status&&(JSON.parse(i.data).success?(Array.from(document.querySelectorAll(".pricing-row > div")).forEach((function(e){e.classList.remove("active")})),document.querySelector("."+r+"-plan").classList.add("active"),Overlay.close(),Notification.showToast("Plan changed successfully.")):(Overlay.close(),Notification.showToast("Plan could not be changed!")));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=i(a.a.mark((function e(t,n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={free:599854,starter:597178,professional:579049,business:589471},i={free:599854,starter:598649,professional:598752,business:598753},"monthly"==n&&(r=o[t]),"annually"==n&&(r=i[t]),Billing.initPaddleCheckout("billing-chane-plan-dialog",t,n,r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{showBillingModal:function(){return e.apply(this,arguments)},initPaddleCheckout:function(e,n,r,a){return t.apply(this,arguments)},changeBillingCycle:function(e){return n.apply(this,arguments)},changePlan:function(e,t){return o.apply(this,arguments)},updatePlan:function(){return r.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Integrations=function(){function e(){return(e=i(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#teamid").value,document.querySelector("#integrate-slack").setAttribute("href","/api/integrations/slack/request/".concat(t)),e.next=4,axios.post("/api/integrations/all",{teamID:t});case 4:(n=e.sent)&&200==n.status&&(0==(n=n.data).length&&(document.querySelector("#integrate-slack").classList.remove("d-none"),document.querySelector("#configure-slack").classList.add("d-none")),n.forEach((function(e,t){"slack"==e.integration_type&&(document.querySelector("#integrate-slack").classList.add("d-none"),document.querySelector("#configure-slack").classList.remove("d-none"))})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(){var t,n,r,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#teamid").value,n=document.querySelector("#userid").value,e.next=4,axios.post("/api/integrations/slack/channels",{teamID:t,userID:n});case 4:if(!(r=e.sent)||200!=r.status){e.next=17;break}return console.log(r.data),document.querySelector("#slack-info").innerHTML='<div class="slack-team-info"><img src="'.concat(r.data.info.team.icon.image_230,'" class="img-fluid" style="max-width: 60px; margin: 10px 10px 20px 0;"><span><b>').concat(r.data.info.team.name,"</b></span></div>"),e.next=10,axios.post("/api/integrations/all",{userID:n,teamID:t});case 10:o=e.sent,i=o.data.filter((function(e){return"slack"==e.integration_type})),s='<select id="playgroup_slack_channel" class="form-control">',r.data.channels.channels.forEach((function(e,t){e.is_private||(i[0].external_channel=="#"+e.name?s+='<option selected="true" value="#'.concat(e.name,'"># ').concat(e.name,"</option>"):s+='<option value="#'.concat(e.name,'"># ').concat(e.name,"</option>"))})),s+="</select>",document.querySelector("#slack-config").innerHTML=s,Overlay.show(".slack-dialog");case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=i(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector(".slack-dialog").getAttribute("data-integrationid"),e.next=3,axios.post("/api/integrations/slack/update",{integrationID:t,playgroupChannel:document.querySelector("#slack-trigger-channel").value,externalChannel:document.querySelector("#playgroup_slack_channel").value});case 3:(n=e.sent)&&200==n.status?(Notification.showToast("Integration settings updated successfully"),Overlay.close()):Notification.showToast("There was an error configuring Slack");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=i(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/integrations/remove",{integrationType:t});case 2:(n=e.sent)&&200==n.status?Notification.showToast("Integration removed successfully"):Notification.showToast("There was an error removing the integration"),Overlay.close();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=i(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Overlay.show(".telegram-dialog");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=i(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector(".telegram-dialog").getAttribute("data-integrationid"),n=document.querySelector("#telegram-token").value,e.prev=2,e.next=5,axios.post("/api/integrations/telegram/update",{integrationID:t,telegramToken:n,playgroupChannel:document.querySelector("#telegram-trigger-channel").value});case 5:(r=e.sent)&&200==r.status?(Notification.showToast("Telegram connected successfully."),Overlay.close()):Notification.showToast("Connection failed. Please check your token."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),Notification.showToast("Connection failed. Please check your token.");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return{getIntegrations:function(){return e.apply(this,arguments)},removeIntegration:function(e){return r.apply(this,arguments)},showSlackConfig:function(){return t.apply(this,arguments)},updateSlackIntegration:function(){return n.apply(this,arguments)},showTelegramDialog:function(){return o.apply(this,arguments)},updateTelegramIntegration:function(){return s.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Settings=function(){function e(){return(e=i(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData(document.querySelector("#settings-form"))).append("bio",window.profileeditor.getData()),n=[],Array.from(document.querySelectorAll(".interests-col .tagify__tag-text")).forEach((function(e){n.push(e.textContent)})),t.append("interests",n.toString()),Array.from(document.querySelectorAll(".custom-profile-field")).forEach((function(e){var n=e.getAttribute("data-customfield");t.append(n,e.querySelector("input").value)})),e.next=8,axios({method:"post",url:"/api/settings/update",data:t,headers:{"Content-Type":"multipart/form-data"}});case 8:(r=e.sent)&&200==r.status&&(Notification.showToast("Profile updated successfully."),document.querySelector("#old_bio").value=window.profileeditor.getData());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#teamid").value,n=new FormData(document.querySelector("#team-settings-form")),r=null,document.querySelector("#editing-domain")?r=document.querySelector("#editing-domain").value:n.append("newURL",null),o=null,document.querySelector("#originalURL")?o=document.querySelector("#originalURL").value:n.append("originalURL",null),e.prev=6,e.next=9,axios({method:"post",url:"/api/settings/updateteam/"+t,data:n,headers:{"Content-Type":"multipart/form-data"}});case 9:(i=e.sent)&&200==i.status?(i.data.team_logo&&Array.from(document.querySelectorAll(".team-logo")).forEach((function(e){e.style.backgroundImage=i.data.team_logo})),Notification.showToast("Team settings updated successfully."),o!=r&&(document.querySelector("#new-domain-field").value=r,Overlay.show(".new-domain-dialog"),setTimeout((function(){window.location.href="https://"+r}),1e4))):Notification.showToast(i.response.data),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),Notification.showToast(e.t0.response.data);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}function n(){return(n=i(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=i(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=i(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector(".add-field-dialog #fieldtype").value,n=document.querySelector(".add-field-dialog #fieldname").value,e.next=4,axios.post("/api/settings/add-field",{fieldType:t,fieldName:n});case 4:(r=e.sent)&&200==r.status&&(o='<div class="col-12 col-md-4" data-customfield="'.concat(n,'">\n        <div class="custom-field row no-gutters">\n          <div class="col"><b>').concat(n,"</b> <small>(<i>").concat(t,'</i>)</small></div>\n          <div class="col-1">\n            <div class="remove-field" data-field="').concat(n,'">\n              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>\n            </div>\n          </div>\n        </div>\n      </div>'),document.querySelector(".custom-field-list .row").innerHTML=document.querySelector(".custom-field-list .row").innerHTML+o,Overlay.close(),Notification.showToast("Custom field added successfully."));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/settings/remove-field",{fieldName:t});case 2:(n=e.sent)&&200==n.status&&((r=document.querySelector("[data-customfield='"+t+"']")).parentNode.removeChild(r),Notification.showToast("Custom field removed successfully."));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=i(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.querySelector("#userid").value,e.next=3,axios.post("/api/integrations/reset-api-key");case 3:(t=e.sent)&&200==t.status&&(document.querySelector("input.api-key").value=t.data,Notification.showToast("API key reset successfully."));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=i(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(t=document.querySelector("#replies-notification").checked)?1:0,n=(n=document.querySelector("#mentions-notification").checked)?1:0,e.next=6,axios.post("/api/settings/updateuser",{email_on_response:t,email_on_mention:n});case 6:(r=e.sent)&&200==r.status&&(console.log(r),Notification.showToast("Settings updated successfully."));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{updateSettings:function(){return e.apply(this,arguments)},updateTeamSettings:function(){return t.apply(this,arguments)},updateUserSettings:function(){return l.apply(this,arguments)},deleteTeam:function(){return n.apply(this,arguments)},exportTeamData:function(){return r.apply(this,arguments)},addCustomField:function(){return o.apply(this,arguments)},removeCustomField:function(e){return s.apply(this,arguments)},resetAPIKey:function(){return c.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Search=function(){function e(){return(e=i(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.querySelector("#teamid").value,document.querySelector("#userid").value,e.next=4,axios.post("/api/search",{teamID:n,query:t});case 4:r=e.sent,o="",r&&200==r.status&&(r.data.forEach((function(e,t){var n,r,a,i,s,c,l;if(e.channel_name&&(r="channel",e.channel_name,i=e.id,i=e.id,s="",a='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line></svg>'),e.thread_id&&(r="thread",e.subject,i=e.channel_id,s=e.thread_id,a='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 9.5H3M21 4.5H3M21 14.5H3M17 19.5H3"/></svg>',n=e.subject),e.comment){var u=Helper.renderContent(JSON.parse(e.item.comment));r="comment",Helper.stripHTML(u),a='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>'}if(e.message){var d=e.message;r="message",Helper.stripHTML(d),c=e.message_id,l=e.convo_id,a='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-send"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>'}e.subject&&(n=e.subject),o+='<li class="suggestion-hit"><a href="#" hit-type="'.concat(r,'" channel-id="').concat(i,'" convo-id="').concat(l,'" message-id="').concat(c,'" thread-id="').concat(s,'">').concat(a,"<span>").concat(n,"</span></a></li>")})),document.querySelector(".suggestions ul").innerHTML=o,document.querySelector(".suggestions").classList.add("visible"));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.querySelector(".suggestions ul").innerHTML="",document.querySelector(".suggestions").classList.remove("visible");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{find:function(t){return e.apply(this,arguments)},closeSearch:function(){return t.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Importer=function(){function e(){return(e=i(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData(document.querySelector("#upload-users-form")),e.next=3,axios({method:"post",url:"/api/import/users",data:t,headers:{"Content-Type":"multipart/form-data"}});case 3:(n=e.sent)&&200==n.status&&("ok"==n.data.status?(Notification.showToast(n.data.amount_imported+" users imported successfully."),window.location.reload()):Notification.showToast("Something went wrong during upload. Please check your CSV."));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(){var t,n,r,o,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#teamid").value,n=document.querySelector("#userid").value,r=new FormData(document.querySelector("#upload-content-form")),document.querySelector("#importing").classList.remove("d-none"),document.querySelector("#upload-content-discord").classList.add("d-none"),document.querySelector(".init-import").classList.add("d-none"),e.next=8,axios({method:"post",url:"/api/import/discord/"+t+"/"+n,data:r,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);document.querySelector(".upload-progress").innerHTML=t+"%",document.querySelector("#progress-bar").value=t,100==t&&document.querySelector(".migration-info").classList.remove("d-none")}});case 8:(o=e.sent)&&200==o.status&&(s=1,c=setInterval(i(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios({method:"get",url:"/imports/"+t+"/import-done.txt"});case 3:e.sent&&(clearInterval(c),document.querySelector(".migration-done").classList.remove("d-none"),Notification.showToast("All content was imported successfully.")),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:6==s&&Notification.showToast("This is taking longer than usual..."),12==s&&(Notification.showToast("Looks lilke something went wrong!"),clearInterval(c)),s++;case 12:case"end":return e.stop()}}),e,null,[[0,7]])}))),1e4));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=i(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/import/deleteuser",{email:t});case 2:(n=e.sent)&&200==n.status&&(1==n.data?(document.querySelector(".whitelist-list").removeChild(document.querySelector('[data-mail="'+t+'"]')),Notification.showToast("User removed successfully.")):Notification.showToast("User could not be removed."));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/import/adduser",{email:t});case 2:(n=e.sent)&&200==n.status&&(1==n.data?(r='<li data-mail="'.concat(t,'"><span>').concat(t,'</span><span class="remove remove-whitelisted-user"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></span></li>'),document.querySelector(".whitelist-list").innerHTML=document.querySelector(".whitelist-list").innerHTML+r,document.querySelector(".add-user-manually").value="",Notification.showToast("User added successfully.")):Notification.showToast("User could not be added."));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{importUsers:function(){return e.apply(this,arguments)},importContent:function(){return t.apply(this,arguments)},removeManually:function(e){return n.apply(this,arguments)},addUserManually:function(e){return r.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Widgets=function(){function e(){return(e=i(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Overlay.show(".widget-"+t+"-dialog");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(t){var n,r,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",r="",o="",0!=t){e.next=9;break}if(""!=(n=document.querySelector("#front-announcement").value)){e.next=8;break}return Widgets.removeWidget("frontpage-message"),e.abrupt("return");case 8:o="frontpage-message";case 9:return 1==t&&(n=document.querySelector("#free-text-widget-msg").value,o="free-text"),2==t&&(i=[],Array.from(document.querySelectorAll(".widget-link-text")).forEach((function(e){i.push(e.value)})),s=[],Array.from(document.querySelectorAll(".widget-link-link")).forEach((function(e){s.push(e.value)})),i.forEach((function(e,t){""!=e&&""!=s[t]&&(n+='<li><a href="'.concat(s[t],'"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" fill-rule="evenodd"><path d="M18 14v5a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8c0-1.1.9-2 2-2h5M15 3h6v6M10 14L20.2 3.8"/></g></svg><span>').concat(e,"</span></a></li>"),r+="".concat(e,",").concat(s[t],","))})),o="link-list"),3==t&&(n="active",o="newest-members"),r=r.slice(0,-1),e.next=15,axios.post("/api/widgets/update",{widgetID:t,widgetName:o,content:n,raw:r});case 15:e.sent&&(Overlay.close(),0==t?Notification.showToast("Message added successfully."):Notification.showToast("Widget added successfully."));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=i(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/widgets/remove",{widgetName:t});case 2:e.sent&&(Overlay.close(),"frontpage-message"==t?Notification.showToast("Message removed successfully."):Notification.showToast("Widget removed successfully."));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{showWidgetDialog:function(t){return e.apply(this,arguments)},saveWidget:function(e){return t.apply(this,arguments)},removeWidget:function(e){return n.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.User=function(){function e(){return(e=i(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.querySelector("#teamid").value,r=document.querySelector("#userid").value,document.querySelector("#profile-bio")&&window.profileeditor&&window.profileeditor.destroy(),o=[],e.next=6,axios.post("/api/members/get",{userID:r,teamID:n});case 6:e.sent.data.forEach((function(e,t){o.push({id:"@"+e.name,userId:e.id})})),ClassicEditor.create(document.querySelector("#profile-bio"),{toolbar:{items:["heading","|","bold","italic","link","highlight","bulletedList","numberedList","|","indent","outdent","|","undo","redo"]},language:"en",highlight:{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"hsla(58,92%,75%,.7)",type:"marker"},{model:"redMarker",class:"marker-red",title:"Red marker",color:"red",type:"marker"}]}}).then((function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new PGUploadAdapter(e)},window.profileeditor=e;var t=document.querySelector("#old_bio").value;t&&window.profileeditor.setData(t)})),null!=window.tagify&&(window.tagify.removeAllTags(),window.tagify.destroy(),window.tagify=void 0),i=document.querySelector("#interests"),window.tagify=new Tagify(i,{dropdown:{classname:"color-blue",enabled:1,maxItems:5}}),t||State.updateURL("profile","profile");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=i(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{showUserProfile:function(t){return e.apply(this,arguments)},showUserSettings:function(e){return t.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Embeds=function(){function e(){return(e=i(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=[],Array.from(document.querySelectorAll(".single-thread-row oembed")).forEach((function(e){n.push(e),t.push(e.getAttribute("url"))})),axios.post("/api/oembed",{urls:t.join()}).then((function(e){e&&(console.log(e.data),e.data.forEach((function(e,r){var a;a=t[r].includes("twitter.com")?'<iframe border=0 frameborder=0 height=380 width=500 src="https://twitframe.com/show?url='.concat(t[r],'"></iframe>'):'<a href="'.concat(t[r],'" class="oembed" target="_blank" rel="noopener nofollow" data-type="').concat(e.type,'">\n              <h2 class="oembed-title">').concat(e.title,'</h2>\n              <div class="row">\n                <div class="col-12 col-md-3">\n                  <img src="').concat(e.image,'" alt="" class="oembed-img img-fluid">\n                </div>\n                <div class="col-12 col-md-9">\n                  <p class="oembed-desc">').concat(e.description,'</p>\n                </div>\n              </div>\n              <div class="row oembed-footer">\n                <div class="col-12 col-md-6 oembed-site-name">').concat(e.site_name,"</div>\n              </div>\n            </a>"),n[r].innerHTML=a})))})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{convertEmbeds:function(){return e.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.LazyRender=function(){function e(){return(e=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.length>0?(n=document.querySelector(".single-channel.active").textContent,r='<div class="col-12 leader-header-col pl-0 mt-5"><div class="leaderboard-title">Most active in <span>'.concat(n.replace("# ","#"),"</span></div></div>"),t.forEach((function(e,t){r+='<svg id="leaderboard-crown" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 112"><defs><style>.cls-1{fill:#e8f4fa;}.cls-2{fill:#ffe500;}.cls-3{fill:#fffacf;}.cls-4{fill:#ebcb00;}.cls-5,.cls-8{fill:none;}.cls-11,.cls-14,.cls-5,.cls-8{stroke:#191816;}.cls-5{stroke-miterlimit:10;}.cls-6{fill:#e04122;}.cls-7{fill:#ff6242;}.cls-11,.cls-14,.cls-8{stroke-linecap:round;stroke-linejoin:round;}.cls-9{fill:#00b8f0;}.cls-10{fill:#4acfff;}.cls-11{fill:#00dba8;}.cls-12{fill:#00f5bc;}.cls-13{fill:#191816;opacity:0.15;}.cls-14{fill:#ffec60;}</style></defs><title>09- king-crown</title><g id="New_Symbol_64-4" data-name="New Symbol 64"><circle class="cls-1" cx="51" cy="53" r="40"/></g><path class="cls-2" d="M54.64,37.31a4.91,4.91,0,1,1-4.91-4.91A4.9,4.9,0,0,1,54.64,37.31Z"/><path class="cls-3" d="M49.73,34.43a4.9,4.9,0,0,1,4.81,3.89,4.74,4.74,0,0,0,.1-1,4.91,4.91,0,1,0-9.82,0,4.74,4.74,0,0,0,.11,1A4.89,4.89,0,0,1,49.73,34.43Z"/><rect class="cls-2" x="31.72" y="69.23" width="36.02" height="4.91"/><rect class="cls-4" x="31.72" y="69.23" width="36.02" height="1.83"/><path class="cls-2" d="M69.37,67.6a1.64,1.64,0,0,1-1.63,1.63h-36a1.64,1.64,0,0,1,0-3.28h36A1.65,1.65,0,0,1,69.37,67.6Z"/><path class="cls-3" d="M31.72,67.59h36a1.64,1.64,0,0,1,1.4.83,1.53,1.53,0,0,0,.23-.82A1.65,1.65,0,0,0,67.74,66h-36a1.63,1.63,0,0,0-1.4,2.47A1.64,1.64,0,0,1,31.72,67.59Z"/><path class="cls-5" d="M69.37,67.6a1.64,1.64,0,0,1-1.63,1.63h-36a1.64,1.64,0,0,1,0-3.28h36A1.65,1.65,0,0,1,69.37,67.6Z"/><path class="cls-2" d="M69.37,75.79a1.64,1.64,0,0,1-1.63,1.63h-36a1.64,1.64,0,0,1,0-3.28h36A1.65,1.65,0,0,1,69.37,75.79Z"/><path class="cls-3" d="M31.72,75.78h36a1.65,1.65,0,0,1,1.4.82,1.53,1.53,0,0,0,.23-.81,1.65,1.65,0,0,0-1.63-1.65h-36a1.65,1.65,0,0,0-1.63,1.65,1.62,1.62,0,0,0,.23.81A1.65,1.65,0,0,1,31.72,75.78Z"/><path class="cls-5" d="M69.37,75.79a1.64,1.64,0,0,1-1.63,1.63h-36a1.64,1.64,0,0,1,0-3.28h36A1.65,1.65,0,0,1,69.37,75.79Z"/><path class="cls-6" d="M46.05,60.65,47.28,66H34.18s-3.37-7,0-12.28,10.64-2.46,10.64-2.46h0A47.66,47.66,0,0,0,46.05,60.65Z"/><path class="cls-7" d="M38,57.91a7.32,7.32,0,0,1,7.09-3.19c-.12-1.16-.21-2.33-.24-3.5h0s-7.27-2.86-10.64,2.46,0,12.28,0,12.28h2.54A11.38,11.38,0,0,1,38,57.91Z"/><polygon class="cls-8" points="67.74 74.14 49.73 74.14 31.72 74.14 31.72 69.23 49.73 69.23 67.74 69.23 67.74 74.14"/><path class="cls-8" d="M31.72,66s-4.09-3.42-4.09-11.43,5.63-10.67,9.82-10.67a15.62,15.62,0,0,1,7.37,1.58"/><path class="cls-8" d="M67.74,66s4.09-3.42,4.09-11.43S66.2,43.86,62,43.86a15.62,15.62,0,0,0-7.37,1.58"/><path class="cls-2" d="M52.19,66H47.28l-1.23-5.31a47.66,47.66,0,0,1-1.21-9.43c0-.47,0-.93,0-1.39V45a2.74,2.74,0,0,1,2.73-2.73h4.36A2.73,2.73,0,0,1,54.64,45v4.88c0,.46,0,.92,0,1.39a48.41,48.41,0,0,1-1.21,9.43Z"/><path class="cls-3" d="M44.82,47a2.74,2.74,0,0,1,2.73-2.74h4.36a2.74,2.74,0,0,1,2.73,2.73V45a2.73,2.73,0,0,0-2.73-2.73H47.55A2.74,2.74,0,0,0,44.82,45v2Z"/><path class="cls-8" d="M52.19,66H47.28l-1.23-5.31a47.66,47.66,0,0,1-1.21-9.43c0-.47,0-.93,0-1.39V45a2.74,2.74,0,0,1,2.73-2.73h4.36A2.73,2.73,0,0,1,54.64,45v4.88c0,.46,0,.92,0,1.39a48.41,48.41,0,0,1-1.21,9.43Z"/><path class="cls-8" d="M54.64,37.31a4.91,4.91,0,1,1-4.91-4.91A4.9,4.9,0,0,1,54.64,37.31Z"/><polyline class="cls-8" points="49.73 32.4 49.73 27.48 49.73 25.03"/><polyline class="cls-8" points="47.28 27.48 49.73 27.48 52.19 27.48"/><path class="cls-9" d="M49.73,47.13a1.64,1.64,0,1,1-1.64,1.64A1.65,1.65,0,0,1,49.73,47.13Z"/><path class="cls-10" d="M49.73,48.53a1.63,1.63,0,0,1,1.47.94,1.51,1.51,0,0,0,.17-.7,1.64,1.64,0,1,0-3.11.7A1.63,1.63,0,0,1,49.73,48.53Z"/><path class="cls-8" d="M49.73,47.13a1.64,1.64,0,1,1-1.64,1.64A1.65,1.65,0,0,1,49.73,47.13Z"/><path class="cls-11" d="M49.73,55.32A1.64,1.64,0,1,1,48.09,57,1.64,1.64,0,0,1,49.73,55.32Z"/><path class="cls-12" d="M49.73,56.72a1.62,1.62,0,0,1,1.47.94,1.55,1.55,0,0,0,.17-.71,1.64,1.64,0,0,0-3.28,0,1.69,1.69,0,0,0,.17.71A1.62,1.62,0,0,1,49.73,56.72Z"/><path class="cls-8" d="M49.73,55.32A1.64,1.64,0,1,1,48.09,57,1.64,1.64,0,0,1,49.73,55.32Z"/><line class="cls-8" x1="44.82" y1="37.31" x2="47.28" y2="37.31"/><line class="cls-8" x1="52.19" y1="37.31" x2="54.64" y2="37.31"/><path class="cls-5" d="M46.05,60.65,47.28,66H34.18s-3.37-7,0-12.28,10.64-2.46,10.64-2.46h0A47.66,47.66,0,0,0,46.05,60.65Z"/><path class="cls-6" d="M53.41,60.65,52.19,66H65.28s3.38-7,0-12.28-10.64-2.46-10.64-2.46h0A47.67,47.67,0,0,1,53.41,60.65Z"/><path class="cls-7" d="M61.47,57.91a7.32,7.32,0,0,0-7.09-3.19c.12-1.16.21-2.33.25-3.5h0s7.27-2.86,10.64,2.46,0,12.28,0,12.28H62.75A11.39,11.39,0,0,0,61.47,57.91Z"/><path class="cls-5" d="M53.41,60.65,52.19,66H65.28s3.38-7,0-12.28-10.64-2.46-10.64-2.46h0A47.67,47.67,0,0,1,53.41,60.65Z"/><ellipse class="cls-13" cx="49.85" cy="86.14" rx="16.1" ry="1.72"/><path class="cls-14" d="M76.57,34.05A2.77,2.77,0,0,1,78.64,32l4.15-1a.33.33,0,0,0,.27-.33.35.35,0,0,0-.27-.34l-4.15-1a2.75,2.75,0,0,1-2.07-2.06l-1-4.15a.33.33,0,0,0-.33-.27.35.35,0,0,0-.34.27l-1,4.15a2.74,2.74,0,0,1-2.07,2.06l-4.15,1a.35.35,0,0,0-.26.34.33.33,0,0,0,.26.33l4.15,1A2.75,2.75,0,0,1,74,34.05l1,4.15a.35.35,0,0,0,.34.27.33.33,0,0,0,.33-.27Z"/><path class="cls-14" d="M26.72,38.08,30,37a.31.31,0,0,0,0-.58l-2.67-.89a1.23,1.23,0,0,1-.77-.77l-.89-2.67a.31.31,0,0,0-.58,0l-.89,2.67a1.21,1.21,0,0,1-.77.77l-2.67.89a.31.31,0,0,0,0,.58l2.67.89a1.18,1.18,0,0,1,.77.77l.89,2.67a.31.31,0,0,0,.58,0Z"/></svg>\n        <a href="/members/'.concat(e.name_slug,'" data-userid="').concat(e.author_id,'" class="col-12 row"><div class="col-2"><div class="commentator round-btn" style="background-image: url(\'').concat(e.avatar,'\')"></div></div>\n        <div class="col-7 my-auto">').concat(e.name,'</div><div class="col-3 my-auto points-col">').concat(e.commentcount," points</div></a>")})),document.querySelector(".leaderboard")&&(document.querySelector(".leaderboard").innerHTML=r,document.querySelector(".leaderboard").classList.add("show-lazy"))):document.querySelector(".leaderboard")&&document.querySelector(".leaderboard").classList.remove("show-lazy");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{renderLeaderboard:function(t){return e.apply(this,arguments)}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.LocalStore=function(){function e(){return(e=i(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.viewed?(n=JSON.parse(localStorage.viewed)).includes(t)||(n.push(t),localStorage.viewed=JSON.stringify(n)):localStorage.viewed=JSON.stringify([t]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{updateViewedThreads:function(t){return e.apply(this,arguments)},getViewedThreads:function(){return localStorage.viewed?JSON.parse(localStorage.viewed):[]}}}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}window.Dashboard=function(){function e(){return(e=i(a.a.mark((function e(){var t,n,r,o,i,s,c,l,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=["01","02","03","04","05","06","07","08","09","10","11","12"],n=document.querySelector("#new-signups").value,r=[],0==(n=JSON.parse(n)).length&&document.querySelector(".no-signups-yet").classList.remove("d-none"),o=0;o<12;o++)(i=n.find((function(e){return e.login_date==t[o]})))?r.push(i.signups):r.push(0);s=document.getElementById("signup-chart").getContext("2d"),new Chart(s,{type:"bar",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{label:"Signups",backgroundColor:"#7555F5",borderColor:"rgb(255, 99, 132)",data:r}]},options:{legend:{display:!1}}}),c=document.querySelector("#channel-activity").value,l=[],u=[],0==(c=JSON.parse(c)).length&&document.querySelector(".no-comments-yet").classList.remove("d-none"),c.forEach((function(e,t){u.push(e.channel_name),l.push(e.comments)})),d=document.getElementById("channel-activity-chart").getContext("2d"),new Chart(d,{type:"doughnut",data:{labels:u,datasets:[{label:"Signups",backgroundColor:["#7555f5","#8266f6","#9076f7","#9e88f8","#ac99f9","#baaafa","#c7bbfb","#d5ccfc","#e3ddfd","#f1eefe"],data:l}]},options:{legend:{display:!1}}});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{showActivity:function(){return e.apply(this,arguments)}}}()},,,,,,,,,,,,,,,,,function(e,t,n){var r,a,o;a=[],void 0===(o="function"==typeof(r=function(){"use strict";function e(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(a,!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!e)return console.warn("Tagify: ","invalid input element ",e),this;this.applySettings(e,t),this.state={},this.value=[],this.listeners={},this.DOM={},this.extend(this,new this.EventDispatcher(this)),this.build(e),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),e.autofocus&&this.DOM.input.focus()}return a.prototype={isIE:window.document.documentMode,TEXTS:{empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},DEFAULTS:{delimiters:",",pattern:null,maxTags:1/0,callbacks:{},addTagOnBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,keepInvalidTags:!1,autoComplete:!0,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,editTags:2,transformTag:function(){},dropdown:{classname:"",enabled:2,maxItems:10,itemTemplate:"",fuzzySearch:!0,highlightFirst:!1,closeOnSelect:!0}},templates:{wrapper:function(e,t){return'<tags class="tagify '.concat(t.mode?"tagify--"+t.mode:""," ").concat(e.className,'"\n                          ').concat(t.readonly?'readonly aria-readonly="true"':'aria-haspopup="true" aria-expanded="false"','\n                          role="tagslist">\n                <span contenteditable data-placeholder="').concat(t.placeholder||"&#8203;",'" aria-placeholder="').concat(t.placeholder||"",'"\n                      class="tagify__input"\n                      role="textbox"\n                      aria-multiline="false"></span>\n            </tags>')},tag:function(e,t){return"<tag title='".concat(t.title||e,"'\n                         contenteditable='false'\n                         spellcheck='false'\n                         class='tagify__tag ").concat(t.class?t.class:"","'\n                         ").concat(this.getAttributes(t),">\n                <x title='' class='tagify__tag__removeBtn' role='button' aria-label='remove tag'></x>\n                <div>\n                    <span class='tagify__tag-text'>").concat(e,"</span>\n                </div>\n            </tag>")},dropdownItem:function(e){var t=(e.value||e).replace(/`|'/g,"&#39;");return"<div ".concat(this.getAttributes(e),"\n                         class='tagify__dropdown__item ").concat(e.class?e.class:"",'\'\n                         tabindex="0"\n                         role="menuitem"\n                         aria-labelledby="dropdown-label">').concat(t,"</div>")}},customEventsList:["click","add","remove","invalid","input","edit"],applySettings:function(e,t){var n=e.getAttribute("data-whitelist"),r=e.getAttribute("data-blacklist");if(this.DEFAULTS.templates=this.templates,this.DEFAULTS.dropdown.itemTemplate=this.templates.dropdownItem,this.settings=this.extend({},this.DEFAULTS,t),this.settings.readonly=e.hasAttribute("readonly"),this.settings.placeholder=e.getAttribute("placeholder")||this.settings.placeholder||"",this.isIE&&(this.settings.autoComplete=!1),r&&(r=r.split(this.settings.delimiters))instanceof Array&&(this.settings.blacklist=r),n&&(n=n.split(this.settings.delimiters))instanceof Array&&(this.settings.whitelist=n),e.pattern)try{this.settings.pattern=new RegExp(e.pattern)}catch(e){}if(this.settings&&this.settings.delimiters)try{this.settings.delimiters=new RegExp(this.settings.delimiters,"g")}catch(e){}"select"==this.settings.mode&&(this.settings.dropdown.enabled=0)},parseHTML:function(e){return(new DOMParser).parseFromString(e.trim(),"text/html").body.firstElementChild},escapeHTML:function(e){var t=document.createTextNode(e),n=document.createElement("p");return n.appendChild(t),n.innerHTML},build:function(e){var t=this.DOM,n=this.settings.templates.wrapper(e,this.settings);t.originalInput=e,t.scope=this.parseHTML(n),t.input=t.scope.querySelector("[contenteditable]"),e.parentNode.insertBefore(t.scope,e),0<=this.settings.dropdown.enabled&&this.dropdown.init.call(this)},destroy:function(){this.DOM.scope.parentNode.removeChild(this.DOM.scope),this.dropdown.hide.call(this,!0)},loadOriginalValues:function(e){var t=0<arguments.length&&void 0!==e?e:this.DOM.originalInput.value;if(t){this.removeAllTags();try{t=JSON.parse(t)}catch(e){}"mix"==this.settings.mode?this.parseMixTags(t):this.addTags(t).forEach((function(e){return e&&e.classList.add("tagify--noAnim")}))}},extend:function(e,t,n){function r(e){var t=Object.prototype.toString.call(e).split(" ")[1].slice(0,-1);return e===Object(e)&&"Array"!=t&&"Function"!=t&&"RegExp"!=t&&"HTMLUnknownElement"!=t}function a(e,t){for(var n in t)t.hasOwnProperty(n)&&(r(t[n])?r(e[n])?a(e[n],t[n]):e[n]=Object.assign({},t[n]):e[n]=t[n])}return e instanceof Object||(e={}),a(e,t),n&&a(e,n),e},EventDispatcher:function(e){var t=document.createTextNode("");this.off=function(e,n){return n&&t.removeEventListener.call(t,e,n),this},this.on=function(e,n){return n&&t.addEventListener.call(t,e,n),this},this.trigger=function(n,r){var a;if(n)if(e.settings.isJQueryPlugin)$(e.DOM.originalInput).triggerHandler(n,[r]);else{try{a=new CustomEvent(n,{detail:r})}catch(n){console.warn(n)}t.dispatchEvent(a)}}},events:{customBinding:function(){var e=this;this.customEventsList.forEach((function(t){e.on(t,e.settings.callbacks[t])}))},binding:function(e){var t,n=!(0<arguments.length&&void 0!==e)||e,a=this.events.callbacks,o=n?"addEventListener":"removeEventListener",i=1==this.settings.editTags?"click_":2==this.settings.editTags?"dblclick":"";for(var s in n&&!this.listeners.main&&(this.DOM.input.addEventListener(this.isIE?"keydown":"input",a[this.isIE?"onInputIE":"onInput"].bind(this)),this.settings.isJQueryPlugin&&$(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),t=this.listeners.main=this.listeners.main||r({paste:["input",a.onPaste.bind(this)],focus:["input",a.onFocusBlur.bind(this)],blur:["input",a.onFocusBlur.bind(this)],keydown:["input",a.onKeydown.bind(this)],click:["scope",a.onClickScope.bind(this)]},i,["scope",a.onDoubleClickScope.bind(this)]))this.DOM[t[s][0]][o](s.replace(/_/g,""),t[s][1]);this.DOM.input.removeEventListener("blur",t.blur[1]),this.DOM.input.addEventListener("blur",t.blur[1])},callbacks:{onFocusBlur:function(e){var t=e.target?e.target.textContent.trim():"";if("mix"!=this.settings.mode){if("focus"==e.type)return this.DOM.scope.classList.add("tagify--focus"),this.trigger("focus"),void(0===this.settings.dropdown.enabled&&this.dropdown.show.call(this));"blur"==e.type&&(this.DOM.scope.classList.remove("tagify--focus"),this.trigger("blur"),t&&this.settings.addTagOnBlur&&this.addTags(t,!0).length),this.DOM.input.removeAttribute("style"),this.dropdown.hide.call(this)}},onKeydown:function(e){var t,n=this,r=e.target.textContent.trim();if("mix"==this.settings.mode){switch(e.key){case"Delete":case"Backspace":var a=[];t=this.DOM.input.children,setTimeout((function(){[].forEach.call(t,(function(e){return a.push(e.getAttribute("value"))})),n.value=n.value.filter((function(e){return-1!=a.indexOf(e.value)}))}),20)}return!0}switch(e.key){case"Backspace":""!=r&&8203!=r.charCodeAt(0)||(!0===this.settings.backspace?this.removeTag():"edit"==this.settings.backspace&&setTimeout(this.editTag.bind(this),0));break;case"Esc":case"Escape":e.target.blur();break;case"Down":case"ArrowDown":"select"==this.settings.mode&&this.dropdown.show.call(this);break;case"ArrowRight":case"Tab":if(!r)return!0;case"Enter":e.preventDefault(),this.addTags(r,!0)}},onInput:function(e){var t="mix"==this.settings.mode?this.DOM.input.textContent:this.input.normalize.call(this),n=t.length>=this.settings.dropdown.enabled,r={value:t,inputElm:this.DOM.input};if("mix"==this.settings.mode)return this.events.callbacks.onMixTagsInput.call(this,e);t?this.input.value!=t&&(r.isValid=this.validateTag(t),this.input.set.call(this,t,!1),-1!=t.search(this.settings.delimiters)?this.addTags(t).length&&this.input.set.call(this):0<=this.settings.dropdown.enabled&&this.dropdown[n?"show":"hide"].call(this,t),this.trigger("input",r)):this.input.set.call(this,"")},onMixTagsInput:function(e){var t,n,r,a,o;if(this.maxTagsReached())return!0;window.getSelection&&0<(t=window.getSelection()).rangeCount&&((n=t.getRangeAt(0).cloneRange()).collapse(!0),n.setStart(window.getSelection().focusNode,0),(a=(r=n.toString().split(this.settings.mixTagsAllowedAfter))[r.length-1].match(this.settings.pattern))&&(this.state.tag={prefix:a[0],value:a.input.split(a[0])[1]},a=this.state.tag,o=this.state.tag.value.length>=this.settings.dropdown.enabled)),this.update(),setTimeout(this.trigger.bind(this,"input",this.extend({},this.state.tag,{textContent:this.DOM.input.textContent})),30),this.state.tag&&this.dropdown[o?"show":"hide"].call(this,this.state.tag.value)},onInputIE:function(e){var t=this;setTimeout((function(){t.events.callbacks.onInput.call(t,e)}))},onPaste:function(e){},onClickScope:function(e){var t,n=e.target.closest("tag");if("TAGS"==e.target.tagName)this.DOM.input.focus();else{if("X"==e.target.tagName)return void this.removeTag(e.target.parentNode);n&&(t=this.getNodeIndex(n),this.trigger("click",{tag:n,index:t,data:this.value[t]}))}"select"!=this.settings.mode&&0!==this.settings.dropdown.enabled||this.dropdown.show.call(this)},onEditTagInput:function(e){var t=e.closest("tag"),n=this.getNodeIndex(t),r=this.input.normalize(e),a=r.toLowerCase()==e.originalValue.toLowerCase()||this.validateTag(r);t.classList.toggle("tagify--invalid",!0!==a),t.isValid=a,this.trigger("input",{tag:t,index:n,data:this.extend({},this.value[n],{newValue:r})})},onEditTagBlur:function(e){var t=e.closest("tag"),r=this.getNodeIndex(t),a=this.input.normalize(e),o=a||e.originalValue,i=this.input.normalize(e)!=e.originalValue,s=t.isValid,c=n({},this.value[r],{value:o});this.DOM.input.focus(),a?i?(this.settings.transformTag.call(this,c),void 0!==(s=this.validateTag(c.value))&&!0!==s||(this.editTagDone(t,c),this.trigger("edit",{tag:t,index:r,data:this.value[r]}))):this.editTagDone(t):this.removeTag(t)},onEditTagkeydown:function(e){switch(e.key){case"Esc":case"Escape":e.target.textContent=e.target.originalValue;case"Enter":case"Tab":e.preventDefault(),e.target.blur()}},onDoubleClickScope:function(e){var t,n,r=e.target.closest("tag"),a=this.settings;r&&(t=r.classList.contains("tagify--editable"),n=r.hasAttribute("readonly"),"mix"==a.mode||"select"==a.mode||a.readonly||a.enforceWhitelist||t||n||this.editTag(r))}}},editTag:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:this.getLastTag(),r=n.querySelector(".tagify__tag-text"),a=this.events.callbacks;if(r)return n.classList.add("tagify--editable"),r.originalValue=r.textContent,r.setAttribute("contenteditable",!0),r.addEventListener("blur",a.onEditTagBlur.bind(this,r)),r.addEventListener("input",a.onEditTagInput.bind(this,r)),r.addEventListener("keydown",(function(e){return a.onEditTagkeydown.call(t,e)})),r.focus(),this.setRangeAtStartEnd(!1,r),this;console.warn("Cannot find element in Tag template: ",".tagify__tag-text")},editTagDone:function(e,t){var n,r=e.querySelector(".tagify__tag-text"),a=r.cloneNode(!0);a.removeAttribute("contenteditable"),e.classList.remove("tagify--editable"),r.parentNode.replaceChild(a,r),t&&(r.textContent=t.value,e.title=t.value,n=this.getNodeIndex(e),this.value[n].value=t.value,this.update())},setRangeAtStartEnd:function(e,t){var n,r;document.createRange&&((n=document.createRange()).selectNodeContents(t||this.DOM.input),n.collapse(!!e),(r=window.getSelection()).removeAllRanges(),r.addRange(n))},input:{value:"",set:function(e,t,n){var r=0<arguments.length&&void 0!==e?e:"",a=!(1<arguments.length&&void 0!==t)||t,o=0<this.settings.dropdown.enabled||this.settings.dropdown.closeOnSelect;this.input.value=r,a&&(this.DOM.input.innerHTML=r),!r&&o&&setTimeout(this.dropdown.hide.bind(this),20),this.input.autocomplete.suggest.call(this,""),this.input.validate.call(this)},validate:function(){var e=!this.input.value||this.validateTag(this.input.value);"select"==this.settings.mode?this.DOM.scope.classList.toggle("tagify--invalid",!0!==e):this.DOM.input.classList.toggle("tagify__input--invalid",!0!==e)},normalize:function(e){var t=(0<arguments.length&&void 0!==e?e:this.DOM.input).innerText;return"settings"in this&&this.settings.delimiters&&(t=t.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(1))),t.replace(/\s/g," ").replace(/^\s+/,"")},autocomplete:{suggest:function(e){e&&this.input.value?this.DOM.input.setAttribute("data-suggest",e.substring(this.input.value.length)):this.DOM.input.removeAttribute("data-suggest")},set:function(e){var t=this.DOM.input.getAttribute("data-suggest"),n=e||(t?this.input.value+t:null);return!!n&&(this.input.set.call(this,n),this.input.autocomplete.suggest.call(this,""),this.dropdown.hide.call(this),this.setRangeAtStartEnd(),!0)}}},getNodeIndex:function(e){var t=0;if(e)for(;e=e.previousElementSibling;)t++;return t},getTagElms:function(){return this.DOM.scope.querySelectorAll("tag")},getLastTag:function(){var e=this.DOM.scope.querySelectorAll("tag:not(.tagify--hide):not([readonly])");return e[e.length-1]},isTagDuplicate:function(e){return"select"!=this.settings.mode&&this.value.some((function(t){return"string"==typeof e?e.trim().toLowerCase()===t.value.toLowerCase():JSON.stringify(t).toLowerCase()===JSON.stringify(e).toLowerCase()}))},getTagIndexByValue:function(e){var t=[];return this.getTagElms().forEach((function(n,r){n.textContent.trim().toLowerCase()==e.toLowerCase()&&t.push(r)})),t},getTagElmByValue:function(e){var t=this.getTagIndexByValue(e)[0];return this.getTagElms()[t]},markTagByValue:function(e,t){return!!(t=t||this.getTagElmByValue(e))&&(t.classList.add("tagify--mark"),t)},isTagBlacklisted:function(e){return e=e.toLowerCase().trim(),this.settings.blacklist.filter((function(t){return e==t.toLowerCase()})).length},isTagWhitelisted:function(e){return this.settings.whitelist.some((function(t){return"string"==typeof e?e.trim().toLowerCase()===(t.value||t).toLowerCase():JSON.stringify(t).toLowerCase()===JSON.stringify(e).toLowerCase()}))},validateTag:function(e){var t=e.trim(),n=!0;return t?this.settings.pattern&&!this.settings.pattern.test(t)?n=this.TEXTS.pattern:!this.settings.duplicates&&this.isTagDuplicate(t)?n=this.TEXTS.duplicate:(this.isTagBlacklisted(t)||this.settings.enforceWhitelist&&!this.isTagWhitelisted(t))&&(n=this.TEXTS.notAllowed):n=this.TEXTS.empty,n},maxTagsReached:function(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},normalizeTags:function(t){function r(e){return e.split(s).filter((function(e){return e})).map((function(e){return{value:e.trim()}}))}var a,o=this.settings,i=o.whitelist,s=o.delimiters,c=o.mode,l=!!i&&i[0]instanceof Object,u=t instanceof Array&&t[0]instanceof Object&&"value"in t[0],d=[];if(u)return(a=[]).concat.apply(a,e(t.map((function(e){return r(e.value).map((function(t){return n({},e,{},t)}))}))));if("number"==typeof t&&(t=t.toString()),"string"==typeof t){if(!t.trim())return[];t=r(t)}else if(!u&&t instanceof Array){var m;t=(m=[]).concat.apply(m,e(t.map((function(e){return r(e)}))))}return l&&(t.forEach((function(e){var t=i.filter((function(t){return t.value.toLowerCase()==e.value.toLowerCase()}));t[0]?d.push(t[0]):"mix"!=c&&d.push(e)})),t=d),t},parseMixTags:function(e){var t=this,n=this.settings,r=n.mixTagsInterpolator,a=n.duplicates,o=n.transformTag;return e=e.split(r[0]).map((function(e){var n,i,s=e.split(r[1]),c=s[0];try{n=JSON.parse(c)}catch(e){n=t.normalizeTags(c)[0]}return!(1<s.length&&t.isTagWhitelisted(n.value))||a&&t.isTagDuplicate(n)||(o.call(t,n),i=t.createTagElem(n),s[0]=i.outerHTML,t.value.push(n)),s.join("")})).join(""),this.DOM.input.innerHTML=e,this.update(),e},addMixTag:function(e){if(e&&this.state.tag){for(var t,n,r,a,o=this.state.tag.prefix+this.state.tag.value,i=document.createNodeIterator(this.DOM.input,NodeFilter.SHOW_TEXT,null,!1),s=100;(t=i.nextNode())&&s--;)if(t.nodeType===Node.TEXT_NODE){if(-1==(r=t.nodeValue.indexOf(o)))continue;a=t.splitText(r),this.settings.transformTag.call(this,e),n=this.createTagElem(e),a.nodeValue=a.nodeValue.replace(o,""),t.parentNode.insertBefore(n,a)}n&&(this.value.push(e),this.update(),this.trigger("add",this.extend({},{index:this.value.length,tag:n},e))),this.state.tag=null}},addEmptyTag:function(){var e={value:""},t=this.createTagElem(e);this.appendTag.call(this,t),this.value.push(e),this.update(),this.editTag(t)},addTags:function(e,t,n){var r=this,a=2<arguments.length&&void 0!==n?n:this.settings.skipInvalid,o=[];return e&&e.length?(e=this.normalizeTags.call(this,e),"mix"==this.settings.mode?this.addMixTag(e[0]):("select"==this.settings.mode&&(e.length=1),this.DOM.input.removeAttribute("style"),e.forEach((function(e){var n,i,s={};if(e=Object.assign({},e),r.settings.transformTag.call(r,e),!0!==(n=r.maxTagsReached()||r.validateTag(e.value))){if(a)return;s["aria-invalid"]=!0,s.class=(e.class||"")+" tagify--notAllowed",s.title=n,r.markTagByValue(e.value),r.trigger("invalid",{data:e,index:r.value.length,message:n})}if(s.role="tag",e.readonly&&(s["aria-readonly"]=!0),i=r.createTagElem(r.extend({},e,s)),o.push(i),"select"==r.settings.mode&&(r.settings.dropdown.closeOnSelect&&(r.dropdown.hide.call(r),r.events.callbacks.onFocusBlur.call(r,{type:"blur"})),t=!1,r.input.set.call(r,e.value,!0,!0),r.getLastTag()))return r.editTagDone(r.getLastTag(),e),r.value[0]=e,r.update(),r.trigger("add",{tag:i,data:e}),[i];r.appendTag(i),!0===n?(r.value.push(e),r.update(),r.trigger("add",{tag:i,index:r.value.length-1,data:e})):r.settings.keepInvalidTags||setTimeout((function(){r.removeTag(i,!0)}),1e3),r.dropdown.position.call(r)})),e.length&&t&&this.input.set.call(this),o)):("select"==this.settings.mode&&this.removeAllTags(),o)},appendTag:function(e){var t=this.DOM.scope.lastElementChild;t===this.DOM.input?this.DOM.scope.insertBefore(e,t):this.DOM.scope.appendChild(e)},minify:function(e){return e.replace(new RegExp(">[\r\n ]+<","g"),"><")},createTagElem:function(e){var t=this.escapeHTML(e.value),n=this.settings.templates.tag.call(this,t,e);return this.settings.readonly&&(e.readonly=!0),n=this.minify(n),this.parseHTML(n)},removeTag:function(e,t,n){var r=0<arguments.length&&void 0!==e?e:this.getLastTag(),a=1<arguments.length?t:void 0,o=2<arguments.length&&void 0!==n?n:250;if("string"==typeof r&&(r=this.getTagElmByValue(r)),r instanceof HTMLElement){var i,s=this,c=this.getNodeIndex(r);"select"==this.settings.mode&&(o=0,this.input.set.call(this)),r.classList.contains("tagify--notAllowed")&&(a=!0),o&&10<o?(r.style.width=parseFloat(window.getComputedStyle(r).width)+"px",document.body.clientTop,r.classList.add("tagify--hide"),setTimeout(l,400)):l()}function l(){r.parentNode&&(r.parentNode.removeChild(r),a?s.settings.keepInvalidTags&&s.trigger("remove",{tag:r,index:c}):(i=s.value.splice(c,1)[0],s.update(),s.trigger("remove",{tag:r,index:c,data:i}),s.dropdown.render.call(s),s.dropdown.position.call(s)))}},removeAllTags:function(){this.value=[],this.update(),Array.prototype.slice.call(this.getTagElms()).forEach((function(e){return e.parentNode.removeChild(e)})),this.dropdown.position.call(this)},getAttributes:function(e){if("[object Object]"!=Object.prototype.toString.call(e))return"";var t,n,r=Object.keys(e),a="";for(n=r.length;n--;)"class"!=(t=r[n])&&e.hasOwnProperty(t)&&e[t]&&(a+=" "+t+(e[t]?'="'.concat(e[t],'"'):""));return a},preUpdate:function(){this.DOM.scope.classList.toggle("hasMaxTags",this.value.length>=this.settings.maxTags)},update:function(){this.preUpdate(),this.DOM.originalInput.value="mix"==this.settings.mode?this.getMixedTagsAsString():this.value.length?JSON.stringify(this.value):""},getMixedTagsAsString:function(){var e=this,t="",n=0,r=this.settings.mixTagsInterpolator;return this.DOM.input.childNodes.forEach((function(a){1==a.nodeType&&a.classList.contains("tagify__tag")?t+=r[0]+JSON.stringify(e.value[n++])+r[1]:t+=a.textContent})),t},dropdown:{init:function(){this.DOM.dropdown=this.dropdown.build.call(this)},build:function(){var e=this.settings.dropdown,t=e.position,n=e.classname,r="".concat("manual"==t?"":"tagify__dropdown"," ").concat(n).trim(),a='<div class="'.concat(r,'" role="menu"></div>');return this.parseHTML(a)},show:function(e){var t,n,r,a=this.settings,o="manual"==a.dropdown.position;if(a.whitelist.length){if(this.suggestedListItems=this.dropdown.filterListItems.call(this,e),!this.suggestedListItems.length)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide.call(this);r=(n=this.suggestedListItems[0]).value||n,this.settings.autoComplete&&0==r.indexOf(e)&&this.input.autocomplete.suggest.call(this,r),t=this.dropdown.createListHTML.call(this,this.suggestedListItems),this.DOM.dropdown.innerHTML=this.minify(t),(a.enforceWhitelist&&!o||a.dropdown.highlightFirst)&&this.dropdown.highlightOption.call(this,this.DOM.dropdown.children[0]),this.DOM.scope.setAttribute("aria-expanded",!0),this.trigger("dropdown:show",this.DOM.dropdown),document.body.contains(this.DOM.dropdown)||(o||(this.dropdown.position.call(this),document.body.appendChild(this.DOM.dropdown),this.events.binding.call(this,!1)),this.dropdown.events.binding.call(this))}},hide:function(e){var t=this.DOM,n=t.scope,r=t.dropdown,a="manual"==this.settings.dropdown.position&&!e;r&&document.body.contains(r)&&!a&&(window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),setTimeout(this.events.binding.bind(this),250),n.setAttribute("aria-expanded",!1),r.parentNode.removeChild(r),this.trigger("dropdown:hide",r))},render:function(){this.suggestedListItems=this.dropdown.filterListItems.call(this,"");var e=this.dropdown.createListHTML.call(this,this.suggestedListItems);this.DOM.dropdown.innerHTML=this.minify(e)},position:function(){var e=this.DOM.scope.getBoundingClientRect();this.DOM.dropdown.style.cssText="left: "+(e.left+window.pageXOffset)+"px;                                                top: "+(e.top+e.height-1+window.pageYOffset)+"px;                                                width: "+e.width+"px"},events:{binding:function(e){var t=!(0<arguments.length&&void 0!==e)||e,n=this.dropdown.events.callbacks,r=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this),onKeyDown:n.onKeyDown.bind(this),onMouseOver:n.onMouseOver.bind(this),onMouseLeave:n.onMouseLeave.bind(this),onClick:n.onClick.bind(this)},a=t?"addEventListener":"removeEventListener";"manual"!=this.settings.dropdown.position&&(window[a]("resize",r.position),window[a]("keydown",r.onKeyDown)),window[a]("mousedown",r.onClick),this.DOM.dropdown[a]("mouseover",r.onMouseOver),this.DOM.dropdown[a]("mouseleave",r.onMouseLeave),this.DOM[this.listeners.main.click[0]][a]("click",this.listeners.main.click[1])},callbacks:{onKeyDown:function(e){var t=this,n=this.DOM.dropdown.querySelector("[class$='--active']"),r=n,a="";switch(e.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":e.preventDefault(),r=(r=r&&r[("ArrowUp"==e.key||"Up"==e.key?"previous":"next")+"ElementSibling"])||this.DOM.dropdown.children["ArrowUp"==e.key||"Up"==e.key?this.DOM.dropdown.children.length-1:0],this.dropdown.highlightOption.call(this,r,!0);break;case"Escape":case"Esc":this.dropdown.hide.call(this);break;case"ArrowRight":case"Tab":try{var o=r?r.textContent:this.suggestedListItems[0].value;this.input.autocomplete.set.call(this,o)}catch(e){}return!1;case"Enter":e.preventDefault();var i=this.settings.dropdown.enabled||this.settings.dropdown.closeOnSelect;if(n)return a=this.suggestedListItems[this.getNodeIndex(n)]||this.input.value,this.trigger("dropdown:select",a),this.addTags([a],!0),this.dropdown[i?"hide":"show"].call(this),"select"==this.settings.mode&&setTimeout((function(){return t.DOM.input.blur()})),!1;this.addTags(this.input.value,!0);break;case"Backspace":if("mix"==this.settings.mode)return;""!=(o=this.input.value.trim())&&8203!=o.charCodeAt(0)||(!0===this.settings.backspace?this.removeTag():"edit"==this.settings.backspace&&setTimeout(this.editTag.bind(this),0))}},onMouseOver:function(e){e.target.className.includes("__item")&&this.dropdown.highlightOption.call(this,e.target)},onMouseLeave:function(e){this.dropdown.highlightOption.call(this)},onClick:function(e){var t,n,r=this;if(0==e.button&&e.target!=this.DOM.dropdown)if(n=e.target.closest(".tagify__dropdown__item")){if(n.parentNode!==this.DOM.dropdown)return;t=this.suggestedListItems[this.getNodeIndex(n)]||this.input.value,this.trigger("dropdown:select",t),this.addTags([t],!0),"select"!=this.settings.mode&&setTimeout((function(){return r.DOM.input.focus()})),this.settings.dropdown.closeOnSelect&&this.dropdown.hide.call(this)}else this.dropdown.hide.call(this),e.target.closest(".tagify")||this.events.callbacks.onFocusBlur.call(this,{type:"blur",target:this.DOM.input})}}},highlightOption:function(e,t){var n,r="tagify__dropdown__item--active";this.DOM.dropdown.querySelectorAll("[class$='--active']").forEach((function(e){e.classList.remove(r),e.removeAttribute("aria-selected")})),e?(e.classList.add(r),e.setAttribute("aria-selected",!0),t&&(e.parentNode.scrollTop=e.clientHeight+e.offsetTop-e.parentNode.clientHeight),this.settings.autoComplete&&(n=this.suggestedListItems[this.getNodeIndex(e)].value||this.input.value,this.input.autocomplete.suggest.call(this,n))):this.input.autocomplete.suggest.call(this)},filterListItems:function(e){var t,n,r,a,o=this,i=[],s=this.settings.whitelist,c=this.settings.dropdown.maxItems||1/0,l=0;if(!e)return s.filter((function(e){return!o.isTagDuplicate(e.value||e)})).slice(0,c);for(;l<s.length&&(r=(((t=s[l]instanceof Object?s[l]:{value:s[l]}).searchBy||"")+" "+t.value).toLowerCase().indexOf(e.toLowerCase()),n=this.settings.dropdown.fuzzySearch?0<=r:0==r,a=!this.settings.duplicates&&this.isTagDuplicate(t.value),n&&!a&&c--&&i.push(t),0!=c);l++);return i},createListHTML:function(e){var t=this.settings.templates.dropdownItem.bind(this);return e.map(t).join("")}}},a})?r.apply(t,a):r)||(e.exports=o)},,,,function(e,t){}],[[38,1,2]]]);